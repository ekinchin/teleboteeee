"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports._params = _params;
exports._parameters = _parameters;
exports._param = _param;
exports._methodHead = _methodHead;
exports._predicate = _predicate;
exports._functionHead = _functionHead;
exports.FunctionDeclaration = exports.FunctionExpression = FunctionExpression;
exports.ArrowFunctionExpression = ArrowFunctionExpression;

function t() {
  const data = _interopRequireWildcard(require("@babel/types"));

  t = function () {
    return data;
  };

  return data;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  } else {
    var newObj = {};

    if (obj != null) {
      for (var key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key)) {
          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};

          if (desc.get || desc.set) {
            Object.defineProperty(newObj, key, desc);
          } else {
            newObj[key] = obj[key];
          }
        }
      }
    }

    newObj.default = obj;
    return newObj;
  }
}

function _params(node) {
  this.print(node.typeParameters, node);
  this.token("(");

  this._parameters(node.params, node);

  this.token(")");
  this.print(node.returnType, node);
}

function _parameters(parameters, parent) {
  for (let i = 0; i < parameters.length; i++) {
    this._param(parameters[i], parent);

    if (i < parameters.length - 1) {
      this.token(",");
      this.space();
    }
  }
}

function _param(parameter, parent) {
  this.printJoin(parameter.decorators, parameter);
  this.print(parameter, parent);
  if (parameter.optional) this.token("?");
  this.print(parameter.typeAnnotation, parameter);
}

function _methodHead(node) {
  const kind = node.kind;
  const key = node.key;

  if (kind === "get" || kind === "set") {
    this.word(kind);
    this.space();
  }

  if (node.async) {
    this.word("async");
    this.space();
  }

  if (kind === "method" || kind === "init") {
    if (node.generator) {
      this.token("*");
    }
  }

  if (node.computed) {
    this.token("[");
    this.print(key, node);
    this.token("]");
  } else {
    this.print(key, node);
  }

  if (node.optional) {
    this.token("?");
  }

  this._params(node);
}

function _predicate(node) {
  if (node.predicate) {
    if (!node.returnType) {
      this.token(":");
    }

    this.space();
    this.print(node.predicate, node);
  }
}

function _functionHead(node) {
  if (node.async) {
    this.word("async");
    this.space();
  }

  this.word("function");
  if (node.generator) this.token("*");
  this.space();

  if (node.id) {
    this.print(node.id, node);
  }

  this._params(node);

  this._predicate(node);
}

function FunctionExpression(node) {
  this._functionHead(node);

  this.space();
  this.print(node.body, node);
}

function ArrowFunctionExpression(node) {
  if (node.async) {
    this.word("async");
    this.space();
  }

  const firstParam = node.params[0];

  if (node.params.length === 1 && t().isIdentifier(firstParam) && !hasTypes(node, firstParam)) {
    this.print(firstParam, node);
  } else {
    this._params(node);
  }

  this._predicate(node);

  this.space();
  this.token("=>");
  this.space();
  this.print(node.body, node);
}

function hasTypes(node, param) {
  return node.typeParameters || node.returnType || param.typeAnnotation || param.optional || param.trailingComments;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYmFiZWwvZ2VuZXJhdG9yL2xpYi9nZW5lcmF0b3JzL21ldGhvZHMuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfcGFyYW1zIiwiX3BhcmFtZXRlcnMiLCJfcGFyYW0iLCJfbWV0aG9kSGVhZCIsIl9wcmVkaWNhdGUiLCJfZnVuY3Rpb25IZWFkIiwiRnVuY3Rpb25EZWNsYXJhdGlvbiIsIkZ1bmN0aW9uRXhwcmVzc2lvbiIsIkFycm93RnVuY3Rpb25FeHByZXNzaW9uIiwidCIsImRhdGEiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJvYmoiLCJfX2VzTW9kdWxlIiwibmV3T2JqIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldCIsInNldCIsImRlZmF1bHQiLCJub2RlIiwicHJpbnQiLCJ0eXBlUGFyYW1ldGVycyIsInRva2VuIiwicGFyYW1zIiwicmV0dXJuVHlwZSIsInBhcmFtZXRlcnMiLCJwYXJlbnQiLCJpIiwibGVuZ3RoIiwic3BhY2UiLCJwYXJhbWV0ZXIiLCJwcmludEpvaW4iLCJkZWNvcmF0b3JzIiwib3B0aW9uYWwiLCJ0eXBlQW5ub3RhdGlvbiIsImtpbmQiLCJ3b3JkIiwiYXN5bmMiLCJnZW5lcmF0b3IiLCJjb21wdXRlZCIsInByZWRpY2F0ZSIsImlkIiwiYm9keSIsImZpcnN0UGFyYW0iLCJpc0lkZW50aWZpZXIiLCJoYXNUeXBlcyIsInBhcmFtIiwidHJhaWxpbmdDb21tZW50cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUFBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFDM0NDLEVBQUFBLEtBQUssRUFBRTtBQURvQyxDQUE3QztBQUdBRCxPQUFPLENBQUNF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QVY7QUFDQSxTQUFLUCxLQUFMO0FBQ0Q7O0FBRUQsUUFBTWMsVUFBVSxHQUFHeEIsSUFBSSxDQUFDSSxNQUFMLENBQVksQ0FBWixDQUFuQjs7QUFFQSxNQUFJSixJQUFJLENBQUNJLE1BQUwsQ0FBWUssTUFBWixLQUF1QixDQUF2QixJQUE0QnpCLENBQUMsR0FBR3lDLFlBQUosQ0FBaUJELFVBQWpCLENBQTVCLElBQTRELENBQUNFLFFBQVEsQ0FBQzFCLElBQUQsRUFBT3dCLFVBQVAsQ0FBekUsRUFBNkY7QUFDM0YsU0FBS3ZCLEtBQUwsQ0FBV3VCLFVBQVgsRUFBdUJ4QixJQUF2QjtBQUNELEdBRkQsTUFFTztBQUNMLFNBQUt6QixPQUFMLENBQWF5QixJQUFiO0FBQ0Q7O0FBRUQsT0FBS3JCLFVBQUwsQ0FBZ0JxQixJQUFoQjs7QUFFQSxPQUFLVSxLQUFMO0FBQ0EsT0FBS1AsS0FBTCxDQUFXLElBQVg7QUFDQSxPQUFLTyxLQUFMO0FBQ0EsT0FBS1QsS0FBTCxDQUFXRCxJQUFJLENBQUN1QixJQUFoQixFQUFzQnZCLElBQXRCO0FBQ0Q7O0FBRUQsU0FBUzBCLFFBQVQsQ0FBa0IxQixJQUFsQixFQUF3QjJCLEtBQXhCLEVBQStCO0FBQzdCLFNBQU8zQixJQUFJLENBQUNFLGNBQUwsSUFBdUJGLElBQUksQ0FBQ0ssVUFBNUIsSUFBMENzQixLQUFLLENBQUNaLGNBQWhELElBQWtFWSxLQUFLLENBQUNiLFFBQXhFLElBQW9GYSxLQUFLLENBQUNDLGdCQUFqRztBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLl9wYXJhbXMgPSBfcGFyYW1zO1xuZXhwb3J0cy5fcGFyYW1ldGVycyA9IF9wYXJhbWV0ZXJzO1xuZXhwb3J0cy5fcGFyYW0gPSBfcGFyYW07XG5leHBvcnRzLl9tZXRob2RIZWFkID0gX21ldGhvZEhlYWQ7XG5leHBvcnRzLl9wcmVkaWNhdGUgPSBfcHJlZGljYXRlO1xuZXhwb3J0cy5fZnVuY3Rpb25IZWFkID0gX2Z1bmN0aW9uSGVhZDtcbmV4cG9ydHMuRnVuY3Rpb25EZWNsYXJhdGlvbiA9IGV4cG9ydHMuRnVuY3Rpb25FeHByZXNzaW9uID0gRnVuY3Rpb25FeHByZXNzaW9uO1xuZXhwb3J0cy5BcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbiA9IEFycm93RnVuY3Rpb25FeHByZXNzaW9uO1xuXG5mdW5jdGlvbiB0KCkge1xuICBjb25zdCBkYXRhID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcIkBiYWJlbC90eXBlc1wiKSk7XG5cbiAgdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfcGFyYW1zKG5vZGUpIHtcbiAgdGhpcy5wcmludChub2RlLnR5cGVQYXJhbWV0ZXJzLCBub2RlKTtcbiAgdGhpcy50b2tlbihcIihcIik7XG5cbiAgdGhpcy5fcGFyYW1ldGVycyhub2RlLnBhcmFtcywgbm9kZSk7XG5cbiAgdGhpcy50b2tlbihcIilcIik7XG4gIHRoaXMucHJpbnQobm9kZS5yZXR1cm5UeXBlLCBub2RlKTtcbn1cblxuZnVuY3Rpb24gX3BhcmFtZXRlcnMocGFyYW1ldGVycywgcGFyZW50KSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1ldGVycy5sZW5ndGg7IGkrKykge1xuICAgIHRoaXMuX3BhcmFtKHBhcmFtZXRlcnNbaV0sIHBhcmVudCk7XG5cbiAgICBpZiAoaSA8IHBhcmFtZXRlcnMubGVuZ3RoIC0gMSkge1xuICAgICAgdGhpcy50b2tlbihcIixcIik7XG4gICAgICB0aGlzLnNwYWNlKCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIF9wYXJhbShwYXJhbWV0ZXIsIHBhcmVudCkge1xuICB0aGlzLnByaW50Sm9pbihwYXJhbWV0ZXIuZGVjb3JhdG9ycywgcGFyYW1ldGVyKTtcbiAgdGhpcy5wcmludChwYXJhbWV0ZXIsIHBhcmVudCk7XG4gIGlmIChwYXJhbWV0ZXIub3B0aW9uYWwpIHRoaXMudG9rZW4oXCI/XCIpO1xuICB0aGlzLnByaW50KHBhcmFtZXRlci50eXBlQW5ub3RhdGlvbiwgcGFyYW1ldGVyKTtcbn1cblxuZnVuY3Rpb24gX21ldGhvZEhlYWQobm9kZSkge1xuICBjb25zdCBraW5kID0gbm9kZS5raW5kO1xuICBjb25zdCBrZXkgPSBub2RlLmtleTtcblxuICBpZiAoa2luZCA9PT0gXCJnZXRcIiB8fCBraW5kID09PSBcInNldFwiKSB7XG4gICAgdGhpcy53b3JkKGtpbmQpO1xuICAgIHRoaXMuc3BhY2UoKTtcbiAgfVxuXG4gIGlmIChub2RlLmFzeW5jKSB7XG4gICAgdGhpcy53b3JkKFwiYXN5bmNcIik7XG4gICAgdGhpcy5zcGFjZSgpO1xuICB9XG5cbiAgaWYgKGtpbmQgPT09IFwibWV0aG9kXCIgfHwga2luZCA9PT0gXCJpbml0XCIpIHtcbiAgICBpZiAobm9kZS5nZW5lcmF0b3IpIHtcbiAgICAgIHRoaXMudG9rZW4oXCIqXCIpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChub2RlLmNvbXB1dGVkKSB7XG4gICAgdGhpcy50b2tlbihcIltcIik7XG4gICAgdGhpcy5wcmludChrZXksIG5vZGUpO1xuICAgIHRoaXMudG9rZW4oXCJdXCIpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucHJpbnQoa2V5LCBub2RlKTtcbiAgfVxuXG4gIGlmIChub2RlLm9wdGlvbmFsKSB7XG4gICAgdGhpcy50b2tlbihcIj9cIik7XG4gIH1cblxuICB0aGlzLl9wYXJhbXMobm9kZSk7XG59XG5cbmZ1bmN0aW9uIF9wcmVkaWNhdGUobm9kZSkge1xuICBpZiAobm9kZS5wcmVkaWNhdGUpIHtcbiAgICBpZiAoIW5vZGUucmV0dXJuVHlwZSkge1xuICAgICAgdGhpcy50b2tlbihcIjpcIik7XG4gICAgfVxuXG4gICAgdGhpcy5zcGFjZSgpO1xuICAgIHRoaXMucHJpbnQobm9kZS5wcmVkaWNhdGUsIG5vZGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9mdW5jdGlvbkhlYWQobm9kZSkge1xuICBpZiAobm9kZS5hc3luYykge1xuICAgIHRoaXMud29yZChcImFzeW5jXCIpO1xuICAgIHRoaXMuc3BhY2UoKTtcbiAgfVxuXG4gIHRoaXMud29yZChcImZ1bmN0aW9uXCIpO1xuICBpZiAobm9kZS5nZW5lcmF0b3IpIHRoaXMudG9rZW4oXCIqXCIpO1xuICB0aGlzLnNwYWNlKCk7XG5cbiAgaWYgKG5vZGUuaWQpIHtcbiAgICB0aGlzLnByaW50KG5vZGUuaWQsIG5vZGUpO1xuICB9XG5cbiAgdGhpcy5fcGFyYW1zKG5vZGUpO1xuXG4gIHRoaXMuX3ByZWRpY2F0ZShub2RlKTtcbn1cblxuZnVuY3Rpb24gRnVuY3Rpb25FeHByZXNzaW9uKG5vZGUpIHtcbiAgdGhpcy5fZnVuY3Rpb25IZWFkKG5vZGUpO1xuXG4gIHRoaXMuc3BhY2UoKTtcbiAgdGhpcy5wcmludChub2RlLmJvZHksIG5vZGUpO1xufVxuXG5mdW5jdGlvbiBBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbihub2RlKSB7XG4gIGlmIChub2RlLmFzeW5jKSB7XG4gICAgdGhpcy53b3JkKFwiYXN5bmNcIik7XG4gICAgdGhpcy5zcGFjZSgpO1xuICB9XG5cbiAgY29uc3QgZmlyc3RQYXJhbSA9IG5vZGUucGFyYW1zWzBdO1xuXG4gIGlmIChub2RlLnBhcmFtcy5sZW5ndGggPT09IDEgJiYgdCgpLmlzSWRlbnRpZmllcihmaXJzdFBhcmFtKSAmJiAhaGFzVHlwZXMobm9kZSwgZmlyc3RQYXJhbSkpIHtcbiAgICB0aGlzLnByaW50KGZpcnN0UGFyYW0sIG5vZGUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX3BhcmFtcyhub2RlKTtcbiAgfVxuXG4gIHRoaXMuX3ByZWRpY2F0ZShub2RlKTtcblxuICB0aGlzLnNwYWNlKCk7XG4gIHRoaXMudG9rZW4oXCI9PlwiKTtcbiAgdGhpcy5zcGFjZSgpO1xuICB0aGlzLnByaW50KG5vZGUuYm9keSwgbm9kZSk7XG59XG5cbmZ1bmN0aW9uIGhhc1R5cGVzKG5vZGUsIHBhcmFtKSB7XG4gIHJldHVybiBub2RlLnR5cGVQYXJhbWV0ZXJzIHx8IG5vZGUucmV0dXJuVHlwZSB8fCBwYXJhbS50eXBlQW5ub3RhdGlvbiB8fCBwYXJhbS5vcHRpb25hbCB8fCBwYXJhbS50cmFpbGluZ0NvbW1lbnRzO1xufSJdfQ==