"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnaryExpression = UnaryExpression;
exports.DoExpression = DoExpression;
exports.ParenthesizedExpression = ParenthesizedExpression;
exports.UpdateExpression = UpdateExpression;
exports.ConditionalExpression = ConditionalExpression;
exports.NewExpression = NewExpression;
exports.SequenceExpression = SequenceExpression;
exports.ThisExpression = ThisExpression;
exports.Super = Super;
exports.Decorator = Decorator;
exports.OptionalMemberExpression = OptionalMemberExpression;
exports.OptionalCallExpression = OptionalCallExpression;
exports.CallExpression = CallExpression;
exports.Import = Import;
exports.EmptyStatement = EmptyStatement;
exports.ExpressionStatement = ExpressionStatement;
exports.AssignmentPattern = AssignmentPattern;
exports.LogicalExpression = exports.BinaryExpression = exports.AssignmentExpression = AssignmentExpression;
exports.BindExpression = BindExpression;
exports.MemberExpression = MemberExpression;
exports.MetaProperty = MetaProperty;
exports.PrivateName = PrivateName;
exports.AwaitExpression = exports.YieldExpression = void 0;

function t() {
  const data = _interopRequireWildcard(require("@babel/types"));

  t = function () {
    return data;
  };

  return data;
}

var n = _interopRequireWildcard(require("../node"));

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  } else {
    var newObj = {};

    if (obj != null) {
      for (var key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key)) {
          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};

          if (desc.get || desc.set) {
            Object.defineProperty(newObj, key, desc);
          } else {
            newObj[key] = obj[key];
          }
        }
      }
    }

    newObj.default = obj;
    return newObj;
  }
}

function UnaryExpression(node) {
  if (node.operator === "void" || node.operator === "delete" || node.operator === "typeof" || node.operator === "throw") {
    this.word(node.operator);
    this.space();
  } else {
    this.token(node.operator);
  }

  this.print(node.argument, node);
}

function DoExpression(node) {
  this.word("do");
  this.space();
  this.print(node.body, node);
}

function ParenthesizedExpression(node) {
  this.token("(");
  this.print(node.expression, node);
  this.token(")");
}

function UpdateExpression(node) {
  if (node.prefix) {
    this.token(node.operator);
    this.print(node.argument, node);
  } else {
    this.startTerminatorless(true);
    this.print(node.argument, node);
    this.endTerminatorless();
    this.token(node.operator);
  }
}

function ConditionalExpression(node) {
  this.print(node.test, node);
  this.space();
  this.token("?");
  this.space();
  this.print(node.consequent, node);
  this.space();
  this.token(":");
  this.space();
  this.print(node.alternate, node);
}

function NewExpression(node, parent) {
  this.word("new");
  this.space();
  this.print(node.callee, node);

  if (this.format.minified && node.arguments.length === 0 && !node.optional && !t().isCallExpression(parent, {
    callee: node
  }) && !t().isMemberExpression(parent) && !t().isNewExpression(parent)) {
    return;
  }

  this.print(node.typeArguments, node);
  this.print(node.typeParameters, node);

  if (node.optional) {
    this.token("?.");
  }

  this.token("(");
  this.printList(node.arguments, node);
  this.token(")");
}

function SequenceExpression(node) {
  this.printList(node.expressions, node);
}

function ThisExpression() {
  this.word("this");
}

function Super() {
  this.word("super");
}

function Decorator(node) {
  this.token("@");
  this.print(node.expression, node);
  this.newline();
}

function OptionalMemberExpression(node) {
  this.print(node.object, node);

  if (!node.computed && t().isMemberExpression(node.property)) {
    throw new TypeError("Got a MemberExpression for MemberExpression property");
  }

  let computed = node.computed;

  if (t().isLiteral(node.property) && typeof node.property.value === "number") {
    computed = true;
  }

  if (node.optional) {
    this.token("?.");
  }

  if (computed) {
    this.token("[");
    this.print(node.property, node);
    this.token("]");
  } else {
    if (!node.optional) {
      this.token(".");
    }

    this.print(node.property, node);
  }
}

function OptionalCallExpression(node) {
  this.print(node.callee, node);
  this.print(node.typeArguments, node);
  this.print(node.typeParameters, node);

  if (node.optional) {
    this.token("?.");
  }

  this.token("(");
  this.printList(node.arguments, node);
  this.token(")");
}

function CallExpression(node) {
  this.print(node.callee, node);
  this.print(node.typeArguments, node);
  this.print(node.typeParameters, node);
  this.token("(");
  this.printList(node.arguments, node);
  this.token(")");
}

function Import() {
  this.word("import");
}

function buildYieldAwait(keyword) {
  return function (node) {
    this.word(keyword);

    if (node.delegate) {
      this.token("*");
    }

    if (node.argument) {
      this.space();
      const terminatorState = this.startTerminatorless();
      this.print(node.argument, node);
      this.endTerminatorless(terminatorState);
    }
  };
}

const YieldExpression = buildYieldAwait("yield");
exports.YieldExpression = YieldExpression;
const AwaitExpression = buildYieldAwait("await");
exports.AwaitExpression = AwaitExpression;

function EmptyStatement() {
  this.semicolon(true);
}

function ExpressionStatement(node) {
  this.print(node.expression, node);
  this.semicolon();
}

function AssignmentPattern(node) {
  this.print(node.left, node);
  if (node.left.optional) this.token("?");
  this.print(node.left.typeAnnotation, node);
  this.space();
  this.token("=");
  this.space();
  this.print(node.right, node);
}

function AssignmentExpression(node, parent) {
  const parens = this.inForStatementInitCounter && node.operator === "in" && !n.needsParens(node, parent);

  if (parens) {
    this.token("(");
  }

  this.print(node.left, node);
  this.space();

  if (node.operator === "in" || node.operator === "instanceof") {
    this.word(node.operator);
  } else {
    this.token(node.operator);
  }

  this.space();
  this.print(node.right, node);

  if (parens) {
    this.token(")");
  }
}

function BindExpression(node) {
  this.print(node.object, node);
  this.token("::");
  this.print(node.callee, node);
}

function MemberExpression(node) {
  this.print(node.object, node);

  if (!node.computed && t().isMemberExpression(node.property)) {
    throw new TypeError("Got a MemberExpression for MemberExpression property");
  }

  let computed = node.computed;

  if (t().isLiteral(node.property) && typeof node.property.value === "number") {
    computed = true;
  }

  if (computed) {
    this.token("[");
    this.print(node.property, node);
    this.token("]");
  } else {
    this.token(".");
    this.print(node.property, node);
  }
}

function MetaProperty(node) {
  this.print(node.meta, node);
  this.token(".");
  this.print(node.property, node);
}

function PrivateName(node) {
  this.token("#");
  this.print(node.id, node);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYmFiZWwvZ2VuZXJhdG9yL2xpYi9nZW5lcmF0b3JzL2V4cHJlc3Npb25zLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiVW5hcnlFeHByZXNzaW9uIiwiRG9FeHByZXNzaW9uIiwiUGFyZW50aGVzaXplZEV4cHJlc3Npb24iLCJVcGRhdGVFeHByZXNzaW9uIiwiQ29uZGl0aW9uYWxFeHByZXNzaW9uIiwiTmV3RXhwcmVzc2lvbiIsIlNlcXVlbmNlRXhwcmVzc2lvbiIsIlRoaXNFeHByZXNzaW9uIiwiU3VwZXIiLCJEZWNvcmF0b3IiLCJPcHRpb25hbE1lbWJlckV4cHJlc3Npb24iLCJPcHRpb25hbENhbGxFeHByZXNzaW9uIiwiQ2FsbEV4cHJlc3Npb24iLCJJbXBvcnQiLCJFbXB0eVN0YXRlbWVudCIsIkV4cHJlc3Npb25TdGF0ZW1lbnQiLCJBc3NpZ25tZW50UGF0dGVybiIsIkxvZ2ljYWxFeHByZXNzaW9uIiwiQmluYXJ5RXhwcmVzc2lvbiIsIkFzc2lnbm1lbnRFeHByZXNzaW9uIiwiQmluZEV4cHJlc3Npb24iLCJNZW1iZXJFeHByZXNzaW9uIiwiTWV0YVByb3BlcnR5IiwiUHJpdmF0ZU5hbWUiLCJBd2FpdEV4cHJlc3Npb24iLCJZaWVsZEV4cHJlc3Npb24iLCJ0IiwiZGF0YSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIm4iLCJvYmoiLCJfX2VzTW9kdWxlIiwibmV3T2JqIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldCIsInNldCIsImRlZmF1bHQiLCJub2RlIiwib3BlcmF0b3IiLCJ3b3JkIiwic3BhY2UiLCJ0b2tlbiIsInByaW50IiwiYXJndW1lbnQiLCJib2R5IiwiZXhwcmVzc2lvbiIsInByZWZpeCIsInN0YXJ0VGVybWluYXRvcmxlc3MiLCJlbmRUZXJtaW5hdG9ybGVzcyIsInRlc3QiLCJjb25zZXF1ZW50IiwiYWx0ZXJuYXRlIiwicGFyZW50IiwiY2FsbGVlIiwiZm9ybWF0IiwibWluaWZpZWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJvcHRpb25hbCIsImlzQ2FsbEV4cHJlc3Npb24iLCJpc01lbWJlckV4cHJlc3Npb24iLCJpc05ld0V4cHJlc3Npb24iLCJ0eXBlQXJndW1lbnRzIiwidHlwZVBhcmFtZXRlcnMiLCJwcmludExpc3QiLCJleHByZXNzaW9ucyIsIm5ld2xpbmUiLCJvYmplY3QiLCJjb21wdXRlZCIsInByb3BlcnR5IiwiVHlwZUVycm9yIiwiaXNMaXRlcmFsIiwiYnVpbGRZaWVsZEF3YWl0Iiwia2V5d29yZCIsImRlbGVnYXRlIiwidGVybWluYXRvclN0YXRlIiwic2VtaWNvbG9uIiwibGVmdCIsInR5cGVBbm5vdGF0aW9uIiwicmlnaHQiLCJwYXJlbnMiLCJpbkZvclN0YXRlbWVudEluaXRDb3VudGVyIiwibmVlZHNQYXJlbnMiLCJtZXRhIiwiaWQiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0FBQzNDQyxFQUFBQSxLQUFLLEVBQUU7QUFEb0MsQ0FBN0M7QUFHQUQsT0FBTyxDQUFDRSxlQUFSLEdBQTBCQSxlQUExQjtBQUNBRixPQUFPLENBQUNHLFlBQVIsR0FBdUJBLFlBQXZCO0FBQ0FILE9BQU8sQ0FBQ0ksdUJBQVIsR0FBa0NBLHVCQUFsQztBQUNBSixPQUFPLENBQUNLLGdCQUFSLEdBQTJCQSxnQkFBM0I7QUFDQUwsT0FBTyxDQUFDTSxxQkFBUixHQUFnQ0EscUJBQWhDO0FBQ0FOLE9BQU8sQ0FBQ08sYUFBUixHQUF3QkEsYUFBeEI7QUFDQVAsT0FBTyxDQUFDUSxrQkFBUixHQUE2QkEsa0JBQTdCO0FBQ0FSLE9BQU8sQ0FBQ1MsY0FBUixHQUF5QkEsY0FBekI7QUFDQVQsT0FBTyxDQUFDVSxLQUFSLEdBQWdCQSxLQUFoQjtBQUNBVixPQUFPLENBQUNXLFNBQVIsR0FBb0JBLFNBQXBCO0FBQ0FYLE9BQU8sQ0FBQ1ksd0JBQVIsR0FBbUNBLHdCQUFuQztBQUNBWixPQUFPLENBQUNhLHNCQUFSLEdBQWlDQSxzQkFBakM7QUFDQWIsT0FBTyxDQUFDYyxjQUFSLEdBQXlCQSxjQUF6QjtBQUNBZCxPQUFPLENBQUNlLE1BQVIsR0FBaUJBLE1BQWpCO0FBQ0FmLE9BQU8sQ0FBQ2dCLGNBQVIsR0FBeUJBLGNBQXpCO0FBQ0FoQixPQUFPLENBQUNpQixtQkFBUixHQUE4QkEsbUJBQTlCO0FBQ0FqQixPQUFPLENBQUNrQixpQkFBUixHQUE0QkEsaUJBQTVCO0FBQ0FsQixPQUFPLENBQUNtQixpQkFBUixHQUE0Qm5CLE9BQU8sQ0FBQ29CLGdCQUFSLEdBQTJCcEIsT0FBTyxDQUFDcUIsb0JBQVIsR0FBK0JBLG9CQUF0RjtBQUNBckIsT0FBTyxDQUFDc0IsY0FBUixHQUF5QkEsY0FBekI7QUFDQXRCLE9BQU8sQ0FBQ3VCLGdCQUFSLEdBQTJCQSxnQkFBM0I7QUFDQXZCLE9BQU8sQ0FBQ3dCLFlBQVIsR0FBdUJBLFlBQXZCO0FBQ0F4QixPQUFPLENBQUN5QixXQUFSLEdBQXNCQSxXQUF0QjtBQUNBekIsT0FBTyxDQUFDMEIsZUFBUixHQUEwQjFCLE9BQU8sQ0FBQzJCLGVBQVIsR0FBMEIsS0FBSyxDQUF6RDs7QUFFQSxTQUFTQyxDQUFULEdBQWE7QUFDWCxRQUFNQyxJQUFJLEdBQUdDLHVCQUF1QixDQUFDQyxPQUFPLENBQUMsY0FBRCxDQUFSLENBQXBDOztBQUVBSCxFQUFBQSxDQUFDLEdBQUcsWUFBWTtBQUNkLFdBQU9DLElBQVA7QUFDRCxHQUZEOztBQUlBLFNBQU9BLElBQVA7QUFDRDs7QUFFRCxJQUFJRyxDQUFDLEdBQUdGLHVCQUF1QixDQUFDQyxPQUFPLENBQUMsU0FBRCxDQUFSLENBQS9COztBQUVBLFNBQVNELHVCQUFULENBQWlDRyxHQUFqQyxFQUFzQztBQUFFLE1BQUlBLEdBQUcsSUFBSUEsR0FBRyxDQUFDQyxVQUFmLEVBQTJCO0FBQUUsV0FBT0QsR0FBUDtBQUFhLEdBQTFDLE1BQWdEO0FBQUUsUUFBSUUsTUFBTSxHQUFHLEVBQWI7O0FBQWlCLFFBQUlGLEdBQUcsSUFBSSxJQUFYLEVBQWlCO0FBQUUsV0FBSyxJQUFJRyxHQUFULElBQWdCSCxHQUFoQixFQUFxQjtBQUFFLFlBQUluQyxNQUFNLENBQUN1QyxTQUFQLENBQWlCQyxjQUFqQixDQUFnQ0MsSUFBaEMsQ0FBcUNOLEdBQXJDLEVBQTBDRyxHQUExQyxDQUFKLEVBQW9EO0FBQUUsY0FBSUksSUFBSSxHQUFHMUMsTUFBTSxDQUFDQyxjQUFQLElBQXlCRCxNQUFNLENBQUMyQyx3QkFBaEMsR0FBMkQzQyxNQUFNLENBQUMyQyx3QkFBUCxDQUFnQ1IsR0FBaEMsRUFBcUNHLEdBQXJDLENBQTNELEdBQXVHLEVBQWxIOztBQUFzSCxjQUFJSSxJQUFJLENBQUNFLEdBQUwsSUFBWUYsSUFBSSxDQUFDRyxHQUFyQixFQUEwQjtBQUFFN0MsWUFBQUEsTUFBTSxDQUFDQyxjQUFQLENBQXNCb0MsTUFBdEIsRUFBOEJDLEdBQTlCLEVBQW1DSSxJQUFuQztBQUEyQyxXQUF2RSxNQUE2RTtBQUFFTCxZQUFBQSxNQUFNLENBQUNDLEdBQUQsQ0FBTixHQUFjSCxHQUFHLENBQUNHLEdBQUQsQ0FBakI7QUFBeUI7QUFBRTtBQUFFO0FBQUU7O0FBQUNELElBQUFBLE1BQU0sQ0FBQ1MsT0FBUCxHQUFpQlgsR0FBakI7QUFBc0IsV0FBT0UsTUFBUDtBQUFnQjtBQUFFOztBQUV4ZCxTQUFTakMsZUFBVCxDQUF5QjJDLElBQXpCLEVBQStCO0FBQzdCLE1BQUlBLElBQUksQ0FBQ0MsUUFBTCxLQUFrQixNQUFsQixJQUE0QkQsSUFBSSxDQUFDQyxRQUFMLEtBQWtCLFFBQTlDLElBQTBERCxJQUFJLENBQUNDLFFBQUwsS0FBa0IsUUFBNUUsSUFBd0ZELElBQUksQ0FBQ0MsUUFBTCxLQUFrQixPQUE5RyxFQUF1SDtBQUNySCxTQUFLQyxJQUFMLENBQVVGLElBQUksQ0FBQ0MsUUFBZjtBQUNBLFNBQUtFLEtBQUw7QUFDRCxHQUhELE1BR087QUFDTCxTQUFLQyxLQUFMLENBQVdKLElBQUksQ0FBQ0MsUUFBaEI7QUFDRDs7QUFFRCxPQUFLSSxLQUFMLENBQVdMLElBQUksQ0FBQ00sUUFBaEIsRUFBMEJOLElBQTFCO0FBQ0Q7O0FBRUQsU0FBUzFDLFlBQVQsQ0FBc0IwQyxJQUF0QixFQUE0QjtBQUMxQixPQUFLRSxJQUFMLENBQVUsSUFBVjtBQUNBLE9BQUtDLEtBQUw7QUFDQSxPQUFLRSxLQUFMLENBQVdMLElBQUksQ0FBQ08sSUFBaEIsRUFBc0JQLElBQXRCO0FBQ0Q7O0FBRUQsU0FBU3pDLHVCQUFULENBQWlDeUMsSUFBakMsRUFBdUM7QUFDckMsT0FBS0ksS0FBTCxDQUFXLEdBQVg7QUFDQSxPQUFLQyxLQUFMLENBQVdMLElBQUksQ0FBQ1EsVUFBaEIsRUFBNEJSLElBQTVCO0FBQ0EsT0FBS0ksS0FBTCxDQUFXLEdBQVg7QUFDRDs7QUFFRCxTQUFTNUMsZ0JBQVQsQ0FBMEJ3QyxJQUExQixFQUFnQztBQUM5QixNQUFJQSxJQUFJLENBQUNTLE1BQVQsRUFBaUI7QUFDZixTQUFLTCxLQUFMLENBQVdKLElBQUksQ0FBQ0MsUUFBaEI7QUFDQSxTQUFLSSxLQUFMLENBQVdMLElBQUksQ0FBQ00sUUFBaEIsRUFBMEJOLElBQTFCO0FBQ0QsR0FIRCxNQUdPO0FBQ0wsU0FBS1UsbUJBQUwsQ0FBeUIsSUFBekI7QUFDQSxTQUFLTCxLQUFMLENBQVdMLElBQUksQ0FBQ00sUUFBaEIsRUFBMEJOLElBQTFCO0FBQ0EsU0FBS1csaUJBQUw7QUFDQSxTQUFLUCxLQUFMLENBQVdKLElBQUksQ0FBQ0MsUUFBaEI7QUFDRDtBQUNGOztBQUVELFNBQVN4QyxxQkFBVCxDQUErQnVDLElBQS9CLEVBQXFDO0FBQ25DLE9BQUtLLEtBQUwsQ0FBV0wsSUFBSSxDQUFDWSxJQUFoQixFQUFzQlosSUFBdEI7QUFDQSxPQUFLRyxLQUFMO0FBQ0EsT0FBS0MsS0FBTCxDQUFXLEdBQVg7QUFDQSxPQUFLRCxLQUFMO0FBQ0EsT0FBS0UsS0FBTCxDQUFXTCxJQUFJLENBQUNhLFVBQWhCLEVBQTRCYixJQUE1QjtBQUNBLE9BQUtHLEtBQUw7QUFDQSxPQUFLQyxLQUFMLENBQVcsR0FBWDtBQUNBLE9BQUtELEtBQUw7QUFDQSxPQUFLRSxLQUFMLENBQVdMLElBQUksQ0FBQ2MsU0FBaEIsRUFBMkJkLElBQTNCO0FBQ0Q7O0FBRUQsU0FBU3RDLGFBQVQsQ0FBdUJzQyxJQUF2QixFQUE2QmUsTUFBN0IsRUFBcUM7QUFDbkMsT0FBS2IsSUFBTCxDQUFVLEtBQVY7QUFDQSxPQUFLQyxLQUFMO0FBQ0EsT0FBS0UsS0FBTCxDQUFXTCxJQUFJLENBQUNnQixNQUFoQixFQUF3QmhCLElBQXhCOztBQUVBLE1BQUksS0FBS2lCLE1BQUwsQ0FBWUMsUUFBWixJQUF3QmxCLElBQUksQ0FBQ21CLFNBQUwsQ0FBZUMsTUFBZixLQUEwQixDQUFsRCxJQUF1RCxDQUFDcEIsSUFBSSxDQUFDcUIsUUFBN0QsSUFBeUUsQ0FBQ3RDLENBQUMsR0FBR3VDLGdCQUFKLENBQXFCUCxNQUFyQixFQUE2QjtBQUN6R0MsSUFBQUEsTUFBTSxFQUFFaEI7QUFEaUcsR0FBN0IsQ0FBMUUsSUFFRSxDQUFDakIsQ0FBQyxHQUFHd0Msa0JBQUosQ0FBdUJSLE1BQXZCLENBRkgsSUFFcUMsQ0FBQ2hDLENBQUMsR0FBR3lDLGVBQUosQ0FBb0JULE1BQXBCLENBRjFDLEVBRXVFO0FBQ3JFO0FBQ0Q7O0FBRUQsT0FBS1YsS0FBTCxDQUFXTCxJQUFJLENBQUN5QixhQUFoQixFQUErQnpCLElBQS9CO0FBQ0EsT0FBS0ssS0FBTCxDQUFXTCxJQUFJLENBQUMwQixjQUFoQixFQUFnQzFCLElBQWhDOztBQUVBLE1BQUlBLElBQUksQ0FBQ3FCLFFBQVQsRUFBbUI7QUFDakIsU0FBS2pCLEtBQUwsQ0FBVyxJQUFYO0FBQ0Q7O0FBRUQsT0FBS0EsS0FBTCxDQUFXLEdBQVg7QUFDQSxPQUFLdUIsU0FBTCxDQUFlM0IsSUFBSSxDQUFDbUIsU0FBcEIsRUFBK0JuQixJQUEvQjtBQUNBLE9BQUtJLEtBQUwsQ0FBVyxHQUFYO0FBQ0Q7O0FBRUQsU0FBU3pDLGtCQUFULENBQTRCcUMsSUFBNUIsRUFBa0M7QUFDaEMsT0FBSzJCLFNBQUwsQ0FBZTNCLElBQUksQ0FBQzRCLFdBQXBCLEVBQWlDNUIsSUFBakM7QUFDRDs7QUFFRCxTQUFTcEMsY0FBVCxHQUEwQjtBQUN4QixPQUFLc0MsSUFBTCxDQUFVLE1BQVY7QUFDRDs7QUFFRCxTQUFTckMsS0FBVCxHQUFpQjtBQUNmLE9BQUtxQyxJQUFMLENBQVUsT0FBVjtBQUNEOztBQUVELFNBQVNwQyxTQUFULENBQW1Ca0MsSUFBbkIsRUFBeUI7QUFDdkIsT0FBS0ksS0FBTCxDQUFXLEdBQVg7QUFDQSxPQUFLQyxLQUFMLENBQVdMLElBQUksQ0FBQ1EsVUFBaEIsRUFBNEJSLElBQTVCO0FBQ0EsT0FBSzZCLE9BQUw7QUFDRDs7QUFFRCxTQUFTOUQsd0JBQVQsQ0FBa0NpQyxJQUFsQyxFQUF3QztBQUN0QyxPQUFLSyxLQUFMLENBQVdMLElBQUksQ0FBQzhCLE1BQWhCLEVBQXdCOUIsSUFBeEI7O0FBRUEsTUFBSSxDQUFDQSxJQUFJLENBQUMrQixRQUFOLElBQWtCaEQsQ0FBQyxHQUFHd0Msa0JBQUosQ0FBdUJ2QixJQUFJLENBQUNnQyxRQUE1QixDQUF0QixFQUE2RDtBQUMzRCxVQUFNLElBQUlDLFNBQUosQ0FBYyxzREFBZCxDQUFOO0FBQ0Q7O0FBRUQsTUFBSUYsUUFBUSxHQUFHL0IsSUFBSSxDQUFDK0IsUUFBcEI7O0FBRUEsTUFBSWhELENBQUMsR0FBR21ELFNBQUosQ0FBY2xDLElBQUksQ0FBQ2dDLFFBQW5CLEtBQWdDLE9BQU9oQyxJQUFJLENBQUNnQyxRQUFMLENBQWM1RSxLQUFyQixLQUErQixRQUFuRSxFQUE2RTtBQUMzRTJFLElBQUFBLFFBQVEsR0FBRyxJQUFYO0FBQ0Q7O0FBRUQsTUFBSS9CLElBQUksQ0FBQ3FCLFFBQVQsRUFBbUI7QUFDakIsU0FBS2pCLEtBQUwsQ0FBVyxJQUFYO0FBQ0Q7O0FBRUQsTUFBSTJCLFFBQUosRUFBYztBQUNaLFNBQUszQixLQUFMLENBQVcsR0FBWDtBQUNBLFNBQUtDLEtBQUwsQ0FBV0wsSUFBSSxDQUFDZ0MsUUFBaEIsRUFBMEJoQyxJQUExQjtBQUNBLFNBQUtJLEtBQUwsQ0FBVyxHQUFYO0FBQ0QsR0FKRCxNQUlPO0FBQ0wsUUFBSSxDQUFDSixJQUFJLENBQUNxQixRQUFWLEVBQW9CO0FBQ2xCLFdBQUtqQixLQUFMLENBQVcsR0FBWDtBQUNEOztBQUVELFNBQUtDLEtBQUwsQ0FBV0wsSUFBSSxDQUFDZ0MsUUFBaEIsRUFBMEJoQyxJQUExQjtBQUNEO0FBQ0Y7O0FBRUQsU0FBU2hDLHNCQUFULENBQWdDZ0MsSUFBaEMsRUFBc0M7QUFDcEMsT0FBS0ssS0FBTCxDQUFXTCxJQUFJLENBQUNnQixNQUFoQixFQUF3QmhCLElBQXhCO0FBQ0EsT0FBS0ssS0FBTCxDQUFXTCxJQUFJLENBQUN5QixhQUFoQixFQUErQnpCLElBQS9CO0FBQ0EsT0FBS0ssS0FBTCxDQUFXTCxJQUFJLENBQUMwQixjQUFoQixFQUFnQzFCLElBQWhDOztBQUVBLE1BQUlBLElBQUksQ0FBQ3FCLFFBQVQsRUFBbUI7QUFDakIsU0FBS2pCLEtBQUwsQ0FBVyxJQUFYO0FBQ0Q7O0FBRUQsT0FBS0EsS0FBTCxDQUFXLEdBQVg7QUFDQSxPQUFLdUIsU0FBTCxDQUFlM0IsSUFBSSxDQUFDbUIsU0FBcEIsRUFBK0JuQixJQUEvQjtBQUNBLE9BQUtJLEtBQUwsQ0FBVyxHQUFYO0FBQ0Q7O0FBRUQsU0FBU25DLGNBQVQsQ0FBd0IrQixJQUF4QixFQUE4QjtBQUM1QixPQUFLSyxLQUFMLENBQVdMLElBQUksQ0FBQ2dCLE1BQWhCLEVBQXdCaEIsSUFBeEI7QUFDQSxPQUFLSyxLQUFMLENBQVdMLElBQUksQ0FBQ3lCLGFBQWhCLEVBQStCekIsSUFBL0I7QUFDQSxPQUFLSyxLQUFMLENBQVdMLElBQUksQ0FBQzBCLGNBQWhCLEVBQWdDMUIsSUFBaEM7QUFDQSxPQUFLSSxLQUFMLENBQVcsR0FBWDtBQUNBLE9BQUt1QixTQUFMLENBQWUzQixJQUFJLENBQUNtQixTQUFwQixFQUErQm5CLElBQS9CO0FBQ0EsT0FBS0ksS0FBTCxDQUFXLEdBQVg7QUFDRDs7QUFFRCxTQUFTbEMsTUFBVCxHQUFrQjtBQUNoQixPQUFLZ0MsSUFBTCxDQUFVLFFBQVY7QUFDRDs7QUFFRCxTQUFTaUMsZUFBVCxDQUF5QkMsT0FBekIsRUFBa0M7QUFDaEMsU0FBTyxVQUFVcEMsSUFBVixFQUFnQjtBQUNyQixTQUFLRSxJQUFMLENBQVVrQyxPQUFWOztBQUVBLFFBQUlwQyxJQUFJLENBQUNxQyxRQUFULEVBQW1CO0FBQ2pCLFdBQUtqQyxLQUFMLENBQVcsR0FBWDtBQUNEOztBQUVELFFBQUlKLElBQUksQ0FBQ00sUUFBVCxFQUFtQjtBQUNqQixXQUFLSCxLQUFMO0FBQ0EsWUFBTW1DLGVBQWUsR0FBRyxLQUFLNUIsbUJBQUwsRUFBeEI7QUFDQSxXQUFLTCxLQUFMLENBQVdMLElBQUksQ0FBQ00sUUFBaEIsRUFBMEJOLElBQTFCO0FBQ0EsV0FBS1csaUJBQUwsQ0FBdUIyQixlQUF2QjtBQUNEO0FBQ0YsR0FiRDtBQWNEOztBQUVELE1BQU14RCxlQUFlLEdBQUdxRCxlQUFlLENBQUMsT0FBRCxDQUF2QztBQUNBaEYsT0FBTyxDQUFDMkIsZUFBUixHQUEwQkEsZUFBMUI7QUFDQSxNQUFNRCxlQUFlLEdBQUdzRCxlQUFlLENBQUMsT0FBRCxDQUF2QztBQUNBaEYsT0FBTyxDQUFDMEIsZUFBUixHQUEwQkEsZUFBMUI7O0FBRUEsU0FBU1YsY0FBVCxHQUEwQjtBQUN4QixPQUFLb0UsU0FBTCxDQUFlLElBQWY7QUFDRDs7QUFFRCxTQUFTbkUsbUJBQVQsQ0FBNkI0QixJQUE3QixFQUFtQztBQUNqQyxPQUFLSyxLQUFMLENBQVdMLElBQUksQ0FBQ1EsVUFBaEIsRUFBNEJSLElBQTVCO0FBQ0EsT0FBS3VDLFNBQUw7QUFDRDs7QUFFRCxTQUFTbEUsaUJBQVQsQ0FBMkIyQixJQUEzQixFQUFpQztBQUMvQixPQUFLSyxLQUFMLENBQVdMLElBQUksQ0FBQ3dDLElBQWhCLEVBQXNCeEMsSUFBdEI7QUFDQSxNQUFJQSxJQUFJLENBQUN3QyxJQUFMLENBQVVuQixRQUFkLEVBQXdCLEtBQUtqQixLQUFMLENBQVcsR0FBWDtBQUN4QixPQUFLQyxLQUFMLENBQVdMLElBQUksQ0FBQ3dDLElBQUwsQ0FBVUMsY0FBckIsRUFBcUN6QyxJQUFyQztBQUNBLE9BQUtHLEtBQUw7QUFDQSxPQUFLQyxLQUFMLENBQVcsR0FBWDtBQUNBLE9BQUtELEtBQUw7QUFDQSxPQUFLRSxLQUFMLENBQVdMLElBQUksQ0FBQzBDLEtBQWhCLEVBQXVCMUMsSUFBdkI7QUFDRDs7QUFFRCxTQUFTeEIsb0JBQVQsQ0FBOEJ3QixJQUE5QixFQUFvQ2UsTUFBcEMsRUFBNEM7QUFDMUMsUUFBTTRCLE1BQU0sR0FBRyxLQUFLQyx5QkFBTCxJQUFrQzVDLElBQUksQ0FBQ0MsUUFBTCxLQUFrQixJQUFwRCxJQUE0RCxDQUFDZCxDQUFDLENBQUMwRCxXQUFGLENBQWM3QyxJQUFkLEVBQW9CZSxNQUFwQixDQUE1RTs7QUFFQSxNQUFJNEIsTUFBSixFQUFZO0FBQ1YsU0FBS3ZDLEtBQUwsQ0FBVyxHQUFYO0FBQ0Q7O0FBRUQsT0FBS0MsS0FBTCxDQUFXTCxJQUFJLENBQUN3QyxJQUFoQixFQUFzQnhDLElBQXRCO0FBQ0EsT0FBS0csS0FBTDs7QUFFQSxNQUFJSCxJQUFJLENBQUNDLFFBQUwsS0FBa0IsSUFBbEIsSUFBMEJELElBQUksQ0FBQ0MsUUFBTCxLQUFrQixZQUFoRCxFQUE4RDtBQUM1RCxTQUFLQyxJQUFMLENBQVVGLElBQUksQ0FBQ0MsUUFBZjtBQUNELEdBRkQsTUFFTztBQUNMLFNBQUtHLEtBQUwsQ0FBV0osSUFBSSxDQUFDQyxRQUFoQjtBQUNEOztBQUVELE9BQUtFLEtBQUw7QUFDQSxPQUFLRSxLQUFMLENBQVdMLElBQUksQ0FBQzBDLEtBQWhCLEVBQXVCMUMsSUFBdkI7O0FBRUEsTUFBSTJDLE1BQUosRUFBWTtBQUNWLFNBQUt2QyxLQUFMLENBQVcsR0FBWDtBQUNEO0FBQ0Y7O0FBRUQsU0FBUzNCLGNBQVQsQ0FBd0J1QixJQUF4QixFQUE4QjtBQUM1QixPQUFLSyxLQUFMLENBQVdMLElBQUksQ0FBQzhCLE1BQWhCLEVBQXdCOUIsSUFBeEI7QUFDQSxPQUFLSSxLQUFMLENBQVcsSUFBWDtBQUNBLE9BQUtDLEtBQUwsQ0FBV0wsSUFBSSxDQUFDZ0IsTUFBaEIsRUFBd0JoQixJQUF4QjtBQUNEOztBQUVELFNBQVN0QixnQkFBVCxDQUEwQnNCLElBQTFCLEVBQWdDO0FBQzlCLE9BQUtLLEtBQUwsQ0FBV0wsSUFBSSxDQUFDOEIsTUFBaEIsRUFBd0I5QixJQUF4Qjs7QUFFQSxNQUFJLENBQUNBLElBQUksQ0FBQytCLFFBQU4sSUFBa0JoRCxDQUFDLEdBQUd3QyxrQkFBSixDQUF1QnZCLElBQUksQ0FBQ2dDLFFBQTVCLENBQXRCLEVBQTZEO0FBQzNELFVBQU0sSUFBSUMsU0FBSixDQUFjLHNEQUFkLENBQU47QUFDRDs7QUFFRCxNQUFJRixRQUFRLEdBQUcvQixJQUFJLENBQUMrQixRQUFwQjs7QUFFQSxNQUFJaEQsQ0FBQyxHQUFHbUQsU0FBSixDQUFjbEMsSUFBSSxDQUFDZ0MsUUFBbkIsS0FBZ0MsT0FBT2hDLElBQUksQ0FBQ2dDLFFBQUwsQ0FBYzVFLEtBQXJCLEtBQStCLFFBQW5FLEVBQTZFO0FBQzNFMkUsSUFBQUEsUUFBUSxHQUFHLElBQVg7QUFDRDs7QUFFRCxNQUFJQSxRQUFKLEVBQWM7QUFDWixTQUFLM0IsS0FBTCxDQUFXLEdBQVg7QUFDQSxTQUFLQyxLQUFMLENBQVdMLElBQUksQ0FBQ2dDLFFBQWhCLEVBQTBCaEMsSUFBMUI7QUFDQSxTQUFLSSxLQUFMLENBQVcsR0FBWDtBQUNELEdBSkQsTUFJTztBQUNMLFNBQUtBLEtBQUwsQ0FBVyxHQUFYO0FBQ0EsU0FBS0MsS0FBTCxDQUFXTCxJQUFJLENBQUNnQyxRQUFoQixFQUEwQmhDLElBQTFCO0FBQ0Q7QUFDRjs7QUFFRCxTQUFTckIsWUFBVCxDQUFzQnFCLElBQXRCLEVBQTRCO0FBQzFCLE9BQUtLLEtBQUwsQ0FBV0wsSUFBSSxDQUFDOEMsSUFBaEIsRUFBc0I5QyxJQUF0QjtBQUNBLE9BQUtJLEtBQUwsQ0FBVyxHQUFYO0FBQ0EsT0FBS0MsS0FBTCxDQUFXTCxJQUFJLENBQUNnQyxRQUFoQixFQUEwQmhDLElBQTFCO0FBQ0Q7O0FBRUQsU0FBU3BCLFdBQVQsQ0FBcUJvQixJQUFyQixFQUEyQjtBQUN6QixPQUFLSSxLQUFMLENBQVcsR0FBWDtBQUNBLE9BQUtDLEtBQUwsQ0FBV0wsSUFBSSxDQUFDK0MsRUFBaEIsRUFBb0IvQyxJQUFwQjtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlVuYXJ5RXhwcmVzc2lvbiA9IFVuYXJ5RXhwcmVzc2lvbjtcbmV4cG9ydHMuRG9FeHByZXNzaW9uID0gRG9FeHByZXNzaW9uO1xuZXhwb3J0cy5QYXJlbnRoZXNpemVkRXhwcmVzc2lvbiA9IFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uO1xuZXhwb3J0cy5VcGRhdGVFeHByZXNzaW9uID0gVXBkYXRlRXhwcmVzc2lvbjtcbmV4cG9ydHMuQ29uZGl0aW9uYWxFeHByZXNzaW9uID0gQ29uZGl0aW9uYWxFeHByZXNzaW9uO1xuZXhwb3J0cy5OZXdFeHByZXNzaW9uID0gTmV3RXhwcmVzc2lvbjtcbmV4cG9ydHMuU2VxdWVuY2VFeHByZXNzaW9uID0gU2VxdWVuY2VFeHByZXNzaW9uO1xuZXhwb3J0cy5UaGlzRXhwcmVzc2lvbiA9IFRoaXNFeHByZXNzaW9uO1xuZXhwb3J0cy5TdXBlciA9IFN1cGVyO1xuZXhwb3J0cy5EZWNvcmF0b3IgPSBEZWNvcmF0b3I7XG5leHBvcnRzLk9wdGlvbmFsTWVtYmVyRXhwcmVzc2lvbiA9IE9wdGlvbmFsTWVtYmVyRXhwcmVzc2lvbjtcbmV4cG9ydHMuT3B0aW9uYWxDYWxsRXhwcmVzc2lvbiA9IE9wdGlvbmFsQ2FsbEV4cHJlc3Npb247XG5leHBvcnRzLkNhbGxFeHByZXNzaW9uID0gQ2FsbEV4cHJlc3Npb247XG5leHBvcnRzLkltcG9ydCA9IEltcG9ydDtcbmV4cG9ydHMuRW1wdHlTdGF0ZW1lbnQgPSBFbXB0eVN0YXRlbWVudDtcbmV4cG9ydHMuRXhwcmVzc2lvblN0YXRlbWVudCA9IEV4cHJlc3Npb25TdGF0ZW1lbnQ7XG5leHBvcnRzLkFzc2lnbm1lbnRQYXR0ZXJuID0gQXNzaWdubWVudFBhdHRlcm47XG5leHBvcnRzLkxvZ2ljYWxFeHByZXNzaW9uID0gZXhwb3J0cy5CaW5hcnlFeHByZXNzaW9uID0gZXhwb3J0cy5Bc3NpZ25tZW50RXhwcmVzc2lvbiA9IEFzc2lnbm1lbnRFeHByZXNzaW9uO1xuZXhwb3J0cy5CaW5kRXhwcmVzc2lvbiA9IEJpbmRFeHByZXNzaW9uO1xuZXhwb3J0cy5NZW1iZXJFeHByZXNzaW9uID0gTWVtYmVyRXhwcmVzc2lvbjtcbmV4cG9ydHMuTWV0YVByb3BlcnR5ID0gTWV0YVByb3BlcnR5O1xuZXhwb3J0cy5Qcml2YXRlTmFtZSA9IFByaXZhdGVOYW1lO1xuZXhwb3J0cy5Bd2FpdEV4cHJlc3Npb24gPSBleHBvcnRzLllpZWxkRXhwcmVzc2lvbiA9IHZvaWQgMDtcblxuZnVuY3Rpb24gdCgpIHtcbiAgY29uc3QgZGF0YSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJAYmFiZWwvdHlwZXNcIikpO1xuXG4gIHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbnZhciBuID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcIi4uL25vZGVcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbmZ1bmN0aW9uIFVuYXJ5RXhwcmVzc2lvbihub2RlKSB7XG4gIGlmIChub2RlLm9wZXJhdG9yID09PSBcInZvaWRcIiB8fCBub2RlLm9wZXJhdG9yID09PSBcImRlbGV0ZVwiIHx8IG5vZGUub3BlcmF0b3IgPT09IFwidHlwZW9mXCIgfHwgbm9kZS5vcGVyYXRvciA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgdGhpcy53b3JkKG5vZGUub3BlcmF0b3IpO1xuICAgIHRoaXMuc3BhY2UoKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnRva2VuKG5vZGUub3BlcmF0b3IpO1xuICB9XG5cbiAgdGhpcy5wcmludChub2RlLmFyZ3VtZW50LCBub2RlKTtcbn1cblxuZnVuY3Rpb24gRG9FeHByZXNzaW9uKG5vZGUpIHtcbiAgdGhpcy53b3JkKFwiZG9cIik7XG4gIHRoaXMuc3BhY2UoKTtcbiAgdGhpcy5wcmludChub2RlLmJvZHksIG5vZGUpO1xufVxuXG5mdW5jdGlvbiBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlKSB7XG4gIHRoaXMudG9rZW4oXCIoXCIpO1xuICB0aGlzLnByaW50KG5vZGUuZXhwcmVzc2lvbiwgbm9kZSk7XG4gIHRoaXMudG9rZW4oXCIpXCIpO1xufVxuXG5mdW5jdGlvbiBVcGRhdGVFeHByZXNzaW9uKG5vZGUpIHtcbiAgaWYgKG5vZGUucHJlZml4KSB7XG4gICAgdGhpcy50b2tlbihub2RlLm9wZXJhdG9yKTtcbiAgICB0aGlzLnByaW50KG5vZGUuYXJndW1lbnQsIG5vZGUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuc3RhcnRUZXJtaW5hdG9ybGVzcyh0cnVlKTtcbiAgICB0aGlzLnByaW50KG5vZGUuYXJndW1lbnQsIG5vZGUpO1xuICAgIHRoaXMuZW5kVGVybWluYXRvcmxlc3MoKTtcbiAgICB0aGlzLnRva2VuKG5vZGUub3BlcmF0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIENvbmRpdGlvbmFsRXhwcmVzc2lvbihub2RlKSB7XG4gIHRoaXMucHJpbnQobm9kZS50ZXN0LCBub2RlKTtcbiAgdGhpcy5zcGFjZSgpO1xuICB0aGlzLnRva2VuKFwiP1wiKTtcbiAgdGhpcy5zcGFjZSgpO1xuICB0aGlzLnByaW50KG5vZGUuY29uc2VxdWVudCwgbm9kZSk7XG4gIHRoaXMuc3BhY2UoKTtcbiAgdGhpcy50b2tlbihcIjpcIik7XG4gIHRoaXMuc3BhY2UoKTtcbiAgdGhpcy5wcmludChub2RlLmFsdGVybmF0ZSwgbm9kZSk7XG59XG5cbmZ1bmN0aW9uIE5ld0V4cHJlc3Npb24obm9kZSwgcGFyZW50KSB7XG4gIHRoaXMud29yZChcIm5ld1wiKTtcbiAgdGhpcy5zcGFjZSgpO1xuICB0aGlzLnByaW50KG5vZGUuY2FsbGVlLCBub2RlKTtcblxuICBpZiAodGhpcy5mb3JtYXQubWluaWZpZWQgJiYgbm9kZS5hcmd1bWVudHMubGVuZ3RoID09PSAwICYmICFub2RlLm9wdGlvbmFsICYmICF0KCkuaXNDYWxsRXhwcmVzc2lvbihwYXJlbnQsIHtcbiAgICBjYWxsZWU6IG5vZGVcbiAgfSkgJiYgIXQoKS5pc01lbWJlckV4cHJlc3Npb24ocGFyZW50KSAmJiAhdCgpLmlzTmV3RXhwcmVzc2lvbihwYXJlbnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5wcmludChub2RlLnR5cGVBcmd1bWVudHMsIG5vZGUpO1xuICB0aGlzLnByaW50KG5vZGUudHlwZVBhcmFtZXRlcnMsIG5vZGUpO1xuXG4gIGlmIChub2RlLm9wdGlvbmFsKSB7XG4gICAgdGhpcy50b2tlbihcIj8uXCIpO1xuICB9XG5cbiAgdGhpcy50b2tlbihcIihcIik7XG4gIHRoaXMucHJpbnRMaXN0KG5vZGUuYXJndW1lbnRzLCBub2RlKTtcbiAgdGhpcy50b2tlbihcIilcIik7XG59XG5cbmZ1bmN0aW9uIFNlcXVlbmNlRXhwcmVzc2lvbihub2RlKSB7XG4gIHRoaXMucHJpbnRMaXN0KG5vZGUuZXhwcmVzc2lvbnMsIG5vZGUpO1xufVxuXG5mdW5jdGlvbiBUaGlzRXhwcmVzc2lvbigpIHtcbiAgdGhpcy53b3JkKFwidGhpc1wiKTtcbn1cblxuZnVuY3Rpb24gU3VwZXIoKSB7XG4gIHRoaXMud29yZChcInN1cGVyXCIpO1xufVxuXG5mdW5jdGlvbiBEZWNvcmF0b3Iobm9kZSkge1xuICB0aGlzLnRva2VuKFwiQFwiKTtcbiAgdGhpcy5wcmludChub2RlLmV4cHJlc3Npb24sIG5vZGUpO1xuICB0aGlzLm5ld2xpbmUoKTtcbn1cblxuZnVuY3Rpb24gT3B0aW9uYWxNZW1iZXJFeHByZXNzaW9uKG5vZGUpIHtcbiAgdGhpcy5wcmludChub2RlLm9iamVjdCwgbm9kZSk7XG5cbiAgaWYgKCFub2RlLmNvbXB1dGVkICYmIHQoKS5pc01lbWJlckV4cHJlc3Npb24obm9kZS5wcm9wZXJ0eSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR290IGEgTWVtYmVyRXhwcmVzc2lvbiBmb3IgTWVtYmVyRXhwcmVzc2lvbiBwcm9wZXJ0eVwiKTtcbiAgfVxuXG4gIGxldCBjb21wdXRlZCA9IG5vZGUuY29tcHV0ZWQ7XG5cbiAgaWYgKHQoKS5pc0xpdGVyYWwobm9kZS5wcm9wZXJ0eSkgJiYgdHlwZW9mIG5vZGUucHJvcGVydHkudmFsdWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICBjb21wdXRlZCA9IHRydWU7XG4gIH1cblxuICBpZiAobm9kZS5vcHRpb25hbCkge1xuICAgIHRoaXMudG9rZW4oXCI/LlwiKTtcbiAgfVxuXG4gIGlmIChjb21wdXRlZCkge1xuICAgIHRoaXMudG9rZW4oXCJbXCIpO1xuICAgIHRoaXMucHJpbnQobm9kZS5wcm9wZXJ0eSwgbm9kZSk7XG4gICAgdGhpcy50b2tlbihcIl1cIik7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFub2RlLm9wdGlvbmFsKSB7XG4gICAgICB0aGlzLnRva2VuKFwiLlwiKTtcbiAgICB9XG5cbiAgICB0aGlzLnByaW50KG5vZGUucHJvcGVydHksIG5vZGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIE9wdGlvbmFsQ2FsbEV4cHJlc3Npb24obm9kZSkge1xuICB0aGlzLnByaW50KG5vZGUuY2FsbGVlLCBub2RlKTtcbiAgdGhpcy5wcmludChub2RlLnR5cGVBcmd1bWVudHMsIG5vZGUpO1xuICB0aGlzLnByaW50KG5vZGUudHlwZVBhcmFtZXRlcnMsIG5vZGUpO1xuXG4gIGlmIChub2RlLm9wdGlvbmFsKSB7XG4gICAgdGhpcy50b2tlbihcIj8uXCIpO1xuICB9XG5cbiAgdGhpcy50b2tlbihcIihcIik7XG4gIHRoaXMucHJpbnRMaXN0KG5vZGUuYXJndW1lbnRzLCBub2RlKTtcbiAgdGhpcy50b2tlbihcIilcIik7XG59XG5cbmZ1bmN0aW9uIENhbGxFeHByZXNzaW9uKG5vZGUpIHtcbiAgdGhpcy5wcmludChub2RlLmNhbGxlZSwgbm9kZSk7XG4gIHRoaXMucHJpbnQobm9kZS50eXBlQXJndW1lbnRzLCBub2RlKTtcbiAgdGhpcy5wcmludChub2RlLnR5cGVQYXJhbWV0ZXJzLCBub2RlKTtcbiAgdGhpcy50b2tlbihcIihcIik7XG4gIHRoaXMucHJpbnRMaXN0KG5vZGUuYXJndW1lbnRzLCBub2RlKTtcbiAgdGhpcy50b2tlbihcIilcIik7XG59XG5cbmZ1bmN0aW9uIEltcG9ydCgpIHtcbiAgdGhpcy53b3JkKFwiaW1wb3J0XCIpO1xufVxuXG5mdW5jdGlvbiBidWlsZFlpZWxkQXdhaXQoa2V5d29yZCkge1xuICByZXR1cm4gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB0aGlzLndvcmQoa2V5d29yZCk7XG5cbiAgICBpZiAobm9kZS5kZWxlZ2F0ZSkge1xuICAgICAgdGhpcy50b2tlbihcIipcIik7XG4gICAgfVxuXG4gICAgaWYgKG5vZGUuYXJndW1lbnQpIHtcbiAgICAgIHRoaXMuc3BhY2UoKTtcbiAgICAgIGNvbnN0IHRlcm1pbmF0b3JTdGF0ZSA9IHRoaXMuc3RhcnRUZXJtaW5hdG9ybGVzcygpO1xuICAgICAgdGhpcy5wcmludChub2RlLmFyZ3VtZW50LCBub2RlKTtcbiAgICAgIHRoaXMuZW5kVGVybWluYXRvcmxlc3ModGVybWluYXRvclN0YXRlKTtcbiAgICB9XG4gIH07XG59XG5cbmNvbnN0IFlpZWxkRXhwcmVzc2lvbiA9IGJ1aWxkWWllbGRBd2FpdChcInlpZWxkXCIpO1xuZXhwb3J0cy5ZaWVsZEV4cHJlc3Npb24gPSBZaWVsZEV4cHJlc3Npb247XG5jb25zdCBBd2FpdEV4cHJlc3Npb24gPSBidWlsZFlpZWxkQXdhaXQoXCJhd2FpdFwiKTtcbmV4cG9ydHMuQXdhaXRFeHByZXNzaW9uID0gQXdhaXRFeHByZXNzaW9uO1xuXG5mdW5jdGlvbiBFbXB0eVN0YXRlbWVudCgpIHtcbiAgdGhpcy5zZW1pY29sb24odHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIEV4cHJlc3Npb25TdGF0ZW1lbnQobm9kZSkge1xuICB0aGlzLnByaW50KG5vZGUuZXhwcmVzc2lvbiwgbm9kZSk7XG4gIHRoaXMuc2VtaWNvbG9uKCk7XG59XG5cbmZ1bmN0aW9uIEFzc2lnbm1lbnRQYXR0ZXJuKG5vZGUpIHtcbiAgdGhpcy5wcmludChub2RlLmxlZnQsIG5vZGUpO1xuICBpZiAobm9kZS5sZWZ0Lm9wdGlvbmFsKSB0aGlzLnRva2VuKFwiP1wiKTtcbiAgdGhpcy5wcmludChub2RlLmxlZnQudHlwZUFubm90YXRpb24sIG5vZGUpO1xuICB0aGlzLnNwYWNlKCk7XG4gIHRoaXMudG9rZW4oXCI9XCIpO1xuICB0aGlzLnNwYWNlKCk7XG4gIHRoaXMucHJpbnQobm9kZS5yaWdodCwgbm9kZSk7XG59XG5cbmZ1bmN0aW9uIEFzc2lnbm1lbnRFeHByZXNzaW9uKG5vZGUsIHBhcmVudCkge1xuICBjb25zdCBwYXJlbnMgPSB0aGlzLmluRm9yU3RhdGVtZW50SW5pdENvdW50ZXIgJiYgbm9kZS5vcGVyYXRvciA9PT0gXCJpblwiICYmICFuLm5lZWRzUGFyZW5zKG5vZGUsIHBhcmVudCk7XG5cbiAgaWYgKHBhcmVucykge1xuICAgIHRoaXMudG9rZW4oXCIoXCIpO1xuICB9XG5cbiAgdGhpcy5wcmludChub2RlLmxlZnQsIG5vZGUpO1xuICB0aGlzLnNwYWNlKCk7XG5cbiAgaWYgKG5vZGUub3BlcmF0b3IgPT09IFwiaW5cIiB8fCBub2RlLm9wZXJhdG9yID09PSBcImluc3RhbmNlb2ZcIikge1xuICAgIHRoaXMud29yZChub2RlLm9wZXJhdG9yKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnRva2VuKG5vZGUub3BlcmF0b3IpO1xuICB9XG5cbiAgdGhpcy5zcGFjZSgpO1xuICB0aGlzLnByaW50KG5vZGUucmlnaHQsIG5vZGUpO1xuXG4gIGlmIChwYXJlbnMpIHtcbiAgICB0aGlzLnRva2VuKFwiKVwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBCaW5kRXhwcmVzc2lvbihub2RlKSB7XG4gIHRoaXMucHJpbnQobm9kZS5vYmplY3QsIG5vZGUpO1xuICB0aGlzLnRva2VuKFwiOjpcIik7XG4gIHRoaXMucHJpbnQobm9kZS5jYWxsZWUsIG5vZGUpO1xufVxuXG5mdW5jdGlvbiBNZW1iZXJFeHByZXNzaW9uKG5vZGUpIHtcbiAgdGhpcy5wcmludChub2RlLm9iamVjdCwgbm9kZSk7XG5cbiAgaWYgKCFub2RlLmNvbXB1dGVkICYmIHQoKS5pc01lbWJlckV4cHJlc3Npb24obm9kZS5wcm9wZXJ0eSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR290IGEgTWVtYmVyRXhwcmVzc2lvbiBmb3IgTWVtYmVyRXhwcmVzc2lvbiBwcm9wZXJ0eVwiKTtcbiAgfVxuXG4gIGxldCBjb21wdXRlZCA9IG5vZGUuY29tcHV0ZWQ7XG5cbiAgaWYgKHQoKS5pc0xpdGVyYWwobm9kZS5wcm9wZXJ0eSkgJiYgdHlwZW9mIG5vZGUucHJvcGVydHkudmFsdWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICBjb21wdXRlZCA9IHRydWU7XG4gIH1cblxuICBpZiAoY29tcHV0ZWQpIHtcbiAgICB0aGlzLnRva2VuKFwiW1wiKTtcbiAgICB0aGlzLnByaW50KG5vZGUucHJvcGVydHksIG5vZGUpO1xuICAgIHRoaXMudG9rZW4oXCJdXCIpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMudG9rZW4oXCIuXCIpO1xuICAgIHRoaXMucHJpbnQobm9kZS5wcm9wZXJ0eSwgbm9kZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gTWV0YVByb3BlcnR5KG5vZGUpIHtcbiAgdGhpcy5wcmludChub2RlLm1ldGEsIG5vZGUpO1xuICB0aGlzLnRva2VuKFwiLlwiKTtcbiAgdGhpcy5wcmludChub2RlLnByb3BlcnR5LCBub2RlKTtcbn1cblxuZnVuY3Rpb24gUHJpdmF0ZU5hbWUobm9kZSkge1xuICB0aGlzLnRva2VuKFwiI1wiKTtcbiAgdGhpcy5wcmludChub2RlLmlkLCBub2RlKTtcbn0iXX0=