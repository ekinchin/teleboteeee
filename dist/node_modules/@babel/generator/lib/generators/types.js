"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Identifier = Identifier;
exports.SpreadElement = exports.RestElement = RestElement;
exports.ObjectPattern = exports.ObjectExpression = ObjectExpression;
exports.ObjectMethod = ObjectMethod;
exports.ObjectProperty = ObjectProperty;
exports.ArrayPattern = exports.ArrayExpression = ArrayExpression;
exports.RegExpLiteral = RegExpLiteral;
exports.BooleanLiteral = BooleanLiteral;
exports.NullLiteral = NullLiteral;
exports.NumericLiteral = NumericLiteral;
exports.StringLiteral = StringLiteral;
exports.BigIntLiteral = BigIntLiteral;

function t() {
  const data = _interopRequireWildcard(require("@babel/types"));

  t = function () {
    return data;
  };

  return data;
}

function _jsesc() {
  const data = _interopRequireDefault(require("jsesc"));

  _jsesc = function () {
    return data;
  };

  return data;
}

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  } else {
    var newObj = {};

    if (obj != null) {
      for (var key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key)) {
          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};

          if (desc.get || desc.set) {
            Object.defineProperty(newObj, key, desc);
          } else {
            newObj[key] = obj[key];
          }
        }
      }
    }

    newObj.default = obj;
    return newObj;
  }
}

function Identifier(node) {
  this.exactSource(node.loc, () => {
    this.word(node.name);
  });
}

function RestElement(node) {
  this.token("...");
  this.print(node.argument, node);
}

function ObjectExpression(node) {
  const props = node.properties;
  this.token("{");
  this.printInnerComments(node);

  if (props.length) {
    this.space();
    this.printList(props, node, {
      indent: true,
      statement: true
    });
    this.space();
  }

  this.token("}");
}

function ObjectMethod(node) {
  this.printJoin(node.decorators, node);

  this._methodHead(node);

  this.space();
  this.print(node.body, node);
}

function ObjectProperty(node) {
  this.printJoin(node.decorators, node);

  if (node.computed) {
    this.token("[");
    this.print(node.key, node);
    this.token("]");
  } else {
    if (t().isAssignmentPattern(node.value) && t().isIdentifier(node.key) && node.key.name === node.value.left.name) {
      this.print(node.value, node);
      return;
    }

    this.print(node.key, node);

    if (node.shorthand && t().isIdentifier(node.key) && t().isIdentifier(node.value) && node.key.name === node.value.name) {
      return;
    }
  }

  this.token(":");
  this.space();
  this.print(node.value, node);
}

function ArrayExpression(node) {
  const elems = node.elements;
  const len = elems.length;
  this.token("[");
  this.printInnerComments(node);

  for (let i = 0; i < elems.length; i++) {
    const elem = elems[i];

    if (elem) {
      if (i > 0) this.space();
      this.print(elem, node);
      if (i < len - 1) this.token(",");
    } else {
      this.token(",");
    }
  }

  this.token("]");
}

function RegExpLiteral(node) {
  this.word(`/${node.pattern}/${node.flags}`);
}

function BooleanLiteral(node) {
  this.word(node.value ? "true" : "false");
}

function NullLiteral() {
  this.word("null");
}

function NumericLiteral(node) {
  const raw = this.getPossibleRaw(node);
  const value = node.value + "";

  if (raw == null) {
    this.number(value);
  } else if (this.format.minified) {
    this.number(raw.length < value.length ? raw : value);
  } else {
    this.number(raw);
  }
}

function StringLiteral(node) {
  const raw = this.getPossibleRaw(node);

  if (!this.format.minified && raw != null) {
    this.token(raw);
    return;
  }

  const opts = this.format.jsescOption;

  if (this.format.jsonCompatibleStrings) {
    opts.json = true;
  }

  const val = (0, _jsesc().default)(node.value, opts);
  return this.token(val);
}

function BigIntLiteral(node) {
  const raw = this.getPossibleRaw(node);

  if (!this.format.minified && raw != null) {
    this.token(raw);
    return;
  }

  this.token(node.value);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYmFiZWwvZ2VuZXJhdG9yL2xpYi9nZW5lcmF0b3JzL3R5cGVzLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiSWRlbnRpZmllciIsIlNwcmVhZEVsZW1lbnQiLCJSZXN0RWxlbWVudCIsIk9iamVjdFBhdHRlcm4iLCJPYmplY3RFeHByZXNzaW9uIiwiT2JqZWN0TWV0aG9kIiwiT2JqZWN0UHJvcGVydHkiLCJBcnJheVBhdHRlcm4iLCJBcnJheUV4cHJlc3Npb24iLCJSZWdFeHBMaXRlcmFsIiwiQm9vbGVhbkxpdGVyYWwiLCJOdWxsTGl0ZXJhbCIsIk51bWVyaWNMaXRlcmFsIiwiU3RyaW5nTGl0ZXJhbCIsIkJpZ0ludExpdGVyYWwiLCJ0IiwiZGF0YSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9qc2VzYyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm5ld09iaiIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXQiLCJzZXQiLCJub2RlIiwiZXhhY3RTb3VyY2UiLCJsb2MiLCJ3b3JkIiwibmFtZSIsInRva2VuIiwicHJpbnQiLCJhcmd1bWVudCIsInByb3BzIiwicHJvcGVydGllcyIsInByaW50SW5uZXJDb21tZW50cyIsImxlbmd0aCIsInNwYWNlIiwicHJpbnRMaXN0IiwiaW5kZW50Iiwic3RhdGVtZW50IiwicHJpbnRKb2luIiwiZGVjb3JhdG9ycyIsIl9tZXRob2RIZWFkIiwiYm9keSIsImNvbXB1dGVkIiwiaXNBc3NpZ25tZW50UGF0dGVybiIsImlzSWRlbnRpZmllciIsImxlZnQiLCJzaG9ydGhhbmQiLCJlbGVtcyIsImVsZW1lbnRzIiwibGVuIiwiaSIsImVsZW0iLCJwYXR0ZXJuIiwiZmxhZ3MiLCJyYXciLCJnZXRQb3NzaWJsZVJhdyIsIm51bWJlciIsImZvcm1hdCIsIm1pbmlmaWVkIiwib3B0cyIsImpzZXNjT3B0aW9uIiwianNvbkNvbXBhdGlibGVTdHJpbmdzIiwianNvbiIsInZhbCJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUFBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFDM0NDLEVBQUFBLEtBQUssRUFBRTtBQURvQyxDQUE3QztBQUdBRCxPQUFPLENBQUNFLFVBQVIsR0FBcUJBLFVBQXJCO0FBQ0FGLE9BQU8sQ0FBQ0csYUFBUixHQUF3QkgsT0FBTyxDQUFDSSxXQUFSLEdBQXNCQSxXQUE5QztBQUNBSixPQUFPLENBQUNLLGFBQVIsR0FBd0JMLE9BQU8sQ0FBQ00sZ0JBQVIsR0FBMkJBLGdCQUFuRDtBQUNBTixPQUFPLENBQUNPLFlBQVIsR0FBdUJBLFlBQXZCO0FBQ0FQLE9BQU8sQ0FBQ1EsY0FBUixHQUF5QkEsY0FBekI7QUFDQVIsT0FBTyxDQUFDUyxZQUFSLEdBQXVCVCxPQUFPLENBQUNVLGVBQVIsR0FBMEJBLGVBQWpEO0FBQ0FWLE9BQU8sQ0FBQ1csYUFBUixHQUF3QkEsYUFBeEI7QUFDQVgsT0FBTyxDQUFDWSxjQUFSLEdBQXlCQSxjQUF6QjtBQUNBWixPQUFPLENBQUNhLFdBQVIsR0FBc0JBLFdBQXRCO0FBQ0FiLE9BQU8sQ0FBQ2MsY0FBUixHQUF5QkEsY0FBekI7QUFDQWQsT0FBTyxDQUFDZSxhQUFSLEdBQXdCQSxhQUF4QjtBQUNBZixPQUFPLENBQUNnQixhQUFSLEdBQXdCQSxhQUF4Qjs7QUFFQSxTQUFTQyxDQUFULEdBQWE7QUFDWCxRQUFNQyxJQUFJLEdBQUdDLHVCQUF1QixDQUFDQyxPQUFPLENBQUMsY0FBRCxDQUFSLENBQXBDOztBQUVBSCxFQUFBQSxDQUFDLEdBQUcsWUFBWTtBQUNkLFdBQU9DLElBQVA7QUFDRCxHQUZEOztBQUlBLFNBQU9BLElBQVA7QUFDRDs7QUFFRCxT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dkIsRUFBNkI7QUFDM0IsUUFBTWdDLEdBQUcsR0FBRyxLQUFLQyxjQUFMLENBQW9CakMsSUFBcEIsQ0FBWjs7QUFFQSxNQUFJLENBQUMsS0FBS21DLE1BQUwsQ0FBWUMsUUFBYixJQUF5QkosR0FBRyxJQUFJLElBQXBDLEVBQTBDO0FBQ3hDLFNBQUszQixLQUFMLENBQVcyQixHQUFYO0FBQ0E7QUFDRDs7QUFFRCxPQUFLM0IsS0FBTCxDQUFXTCxJQUFJLENBQUNsQyxLQUFoQjtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLklkZW50aWZpZXIgPSBJZGVudGlmaWVyO1xuZXhwb3J0cy5TcHJlYWRFbGVtZW50ID0gZXhwb3J0cy5SZXN0RWxlbWVudCA9IFJlc3RFbGVtZW50O1xuZXhwb3J0cy5PYmplY3RQYXR0ZXJuID0gZXhwb3J0cy5PYmplY3RFeHByZXNzaW9uID0gT2JqZWN0RXhwcmVzc2lvbjtcbmV4cG9ydHMuT2JqZWN0TWV0aG9kID0gT2JqZWN0TWV0aG9kO1xuZXhwb3J0cy5PYmplY3RQcm9wZXJ0eSA9IE9iamVjdFByb3BlcnR5O1xuZXhwb3J0cy5BcnJheVBhdHRlcm4gPSBleHBvcnRzLkFycmF5RXhwcmVzc2lvbiA9IEFycmF5RXhwcmVzc2lvbjtcbmV4cG9ydHMuUmVnRXhwTGl0ZXJhbCA9IFJlZ0V4cExpdGVyYWw7XG5leHBvcnRzLkJvb2xlYW5MaXRlcmFsID0gQm9vbGVhbkxpdGVyYWw7XG5leHBvcnRzLk51bGxMaXRlcmFsID0gTnVsbExpdGVyYWw7XG5leHBvcnRzLk51bWVyaWNMaXRlcmFsID0gTnVtZXJpY0xpdGVyYWw7XG5leHBvcnRzLlN0cmluZ0xpdGVyYWwgPSBTdHJpbmdMaXRlcmFsO1xuZXhwb3J0cy5CaWdJbnRMaXRlcmFsID0gQmlnSW50TGl0ZXJhbDtcblxuZnVuY3Rpb24gdCgpIHtcbiAgY29uc3QgZGF0YSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJAYmFiZWwvdHlwZXNcIikpO1xuXG4gIHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIF9qc2VzYygpIHtcbiAgY29uc3QgZGF0YSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImpzZXNjXCIpKTtcblxuICBfanNlc2MgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307IGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gSWRlbnRpZmllcihub2RlKSB7XG4gIHRoaXMuZXhhY3RTb3VyY2Uobm9kZS5sb2MsICgpID0+IHtcbiAgICB0aGlzLndvcmQobm9kZS5uYW1lKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIFJlc3RFbGVtZW50KG5vZGUpIHtcbiAgdGhpcy50b2tlbihcIi4uLlwiKTtcbiAgdGhpcy5wcmludChub2RlLmFyZ3VtZW50LCBub2RlKTtcbn1cblxuZnVuY3Rpb24gT2JqZWN0RXhwcmVzc2lvbihub2RlKSB7XG4gIGNvbnN0IHByb3BzID0gbm9kZS5wcm9wZXJ0aWVzO1xuICB0aGlzLnRva2VuKFwie1wiKTtcbiAgdGhpcy5wcmludElubmVyQ29tbWVudHMobm9kZSk7XG5cbiAgaWYgKHByb3BzLmxlbmd0aCkge1xuICAgIHRoaXMuc3BhY2UoKTtcbiAgICB0aGlzLnByaW50TGlzdChwcm9wcywgbm9kZSwge1xuICAgICAgaW5kZW50OiB0cnVlLFxuICAgICAgc3RhdGVtZW50OiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5zcGFjZSgpO1xuICB9XG5cbiAgdGhpcy50b2tlbihcIn1cIik7XG59XG5cbmZ1bmN0aW9uIE9iamVjdE1ldGhvZChub2RlKSB7XG4gIHRoaXMucHJpbnRKb2luKG5vZGUuZGVjb3JhdG9ycywgbm9kZSk7XG5cbiAgdGhpcy5fbWV0aG9kSGVhZChub2RlKTtcblxuICB0aGlzLnNwYWNlKCk7XG4gIHRoaXMucHJpbnQobm9kZS5ib2R5LCBub2RlKTtcbn1cblxuZnVuY3Rpb24gT2JqZWN0UHJvcGVydHkobm9kZSkge1xuICB0aGlzLnByaW50Sm9pbihub2RlLmRlY29yYXRvcnMsIG5vZGUpO1xuXG4gIGlmIChub2RlLmNvbXB1dGVkKSB7XG4gICAgdGhpcy50b2tlbihcIltcIik7XG4gICAgdGhpcy5wcmludChub2RlLmtleSwgbm9kZSk7XG4gICAgdGhpcy50b2tlbihcIl1cIik7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHQoKS5pc0Fzc2lnbm1lbnRQYXR0ZXJuKG5vZGUudmFsdWUpICYmIHQoKS5pc0lkZW50aWZpZXIobm9kZS5rZXkpICYmIG5vZGUua2V5Lm5hbWUgPT09IG5vZGUudmFsdWUubGVmdC5uYW1lKSB7XG4gICAgICB0aGlzLnByaW50KG5vZGUudmFsdWUsIG5vZGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucHJpbnQobm9kZS5rZXksIG5vZGUpO1xuXG4gICAgaWYgKG5vZGUuc2hvcnRoYW5kICYmIHQoKS5pc0lkZW50aWZpZXIobm9kZS5rZXkpICYmIHQoKS5pc0lkZW50aWZpZXIobm9kZS52YWx1ZSkgJiYgbm9kZS5rZXkubmFtZSA9PT0gbm9kZS52YWx1ZS5uYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgdGhpcy50b2tlbihcIjpcIik7XG4gIHRoaXMuc3BhY2UoKTtcbiAgdGhpcy5wcmludChub2RlLnZhbHVlLCBub2RlKTtcbn1cblxuZnVuY3Rpb24gQXJyYXlFeHByZXNzaW9uKG5vZGUpIHtcbiAgY29uc3QgZWxlbXMgPSBub2RlLmVsZW1lbnRzO1xuICBjb25zdCBsZW4gPSBlbGVtcy5sZW5ndGg7XG4gIHRoaXMudG9rZW4oXCJbXCIpO1xuICB0aGlzLnByaW50SW5uZXJDb21tZW50cyhub2RlKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZWxlbSA9IGVsZW1zW2ldO1xuXG4gICAgaWYgKGVsZW0pIHtcbiAgICAgIGlmIChpID4gMCkgdGhpcy5zcGFjZSgpO1xuICAgICAgdGhpcy5wcmludChlbGVtLCBub2RlKTtcbiAgICAgIGlmIChpIDwgbGVuIC0gMSkgdGhpcy50b2tlbihcIixcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudG9rZW4oXCIsXCIpO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMudG9rZW4oXCJdXCIpO1xufVxuXG5mdW5jdGlvbiBSZWdFeHBMaXRlcmFsKG5vZGUpIHtcbiAgdGhpcy53b3JkKGAvJHtub2RlLnBhdHRlcm59LyR7bm9kZS5mbGFnc31gKTtcbn1cblxuZnVuY3Rpb24gQm9vbGVhbkxpdGVyYWwobm9kZSkge1xuICB0aGlzLndvcmQobm9kZS52YWx1ZSA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiKTtcbn1cblxuZnVuY3Rpb24gTnVsbExpdGVyYWwoKSB7XG4gIHRoaXMud29yZChcIm51bGxcIik7XG59XG5cbmZ1bmN0aW9uIE51bWVyaWNMaXRlcmFsKG5vZGUpIHtcbiAgY29uc3QgcmF3ID0gdGhpcy5nZXRQb3NzaWJsZVJhdyhub2RlKTtcbiAgY29uc3QgdmFsdWUgPSBub2RlLnZhbHVlICsgXCJcIjtcblxuICBpZiAocmF3ID09IG51bGwpIHtcbiAgICB0aGlzLm51bWJlcih2YWx1ZSk7XG4gIH0gZWxzZSBpZiAodGhpcy5mb3JtYXQubWluaWZpZWQpIHtcbiAgICB0aGlzLm51bWJlcihyYXcubGVuZ3RoIDwgdmFsdWUubGVuZ3RoID8gcmF3IDogdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubnVtYmVyKHJhdyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gU3RyaW5nTGl0ZXJhbChub2RlKSB7XG4gIGNvbnN0IHJhdyA9IHRoaXMuZ2V0UG9zc2libGVSYXcobm9kZSk7XG5cbiAgaWYgKCF0aGlzLmZvcm1hdC5taW5pZmllZCAmJiByYXcgIT0gbnVsbCkge1xuICAgIHRoaXMudG9rZW4ocmF3KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBvcHRzID0gdGhpcy5mb3JtYXQuanNlc2NPcHRpb247XG5cbiAgaWYgKHRoaXMuZm9ybWF0Lmpzb25Db21wYXRpYmxlU3RyaW5ncykge1xuICAgIG9wdHMuanNvbiA9IHRydWU7XG4gIH1cblxuICBjb25zdCB2YWwgPSAoMCwgX2pzZXNjKCkuZGVmYXVsdCkobm9kZS52YWx1ZSwgb3B0cyk7XG4gIHJldHVybiB0aGlzLnRva2VuKHZhbCk7XG59XG5cbmZ1bmN0aW9uIEJpZ0ludExpdGVyYWwobm9kZSkge1xuICBjb25zdCByYXcgPSB0aGlzLmdldFBvc3NpYmxlUmF3KG5vZGUpO1xuXG4gIGlmICghdGhpcy5mb3JtYXQubWluaWZpZWQgJiYgcmF3ICE9IG51bGwpIHtcbiAgICB0aGlzLnRva2VuKHJhdyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy50b2tlbihub2RlLnZhbHVlKTtcbn0iXX0=