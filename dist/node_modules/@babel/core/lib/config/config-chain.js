"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.buildPresetChain = buildPresetChain;
exports.buildRootChain = buildRootChain;
exports.buildPresetChainWalker = void 0;

function _path() {
  const data = _interopRequireDefault(require("path"));

  _path = function () {
    return data;
  };

  return data;
}

function _debug() {
  const data = _interopRequireDefault(require("debug"));

  _debug = function () {
    return data;
  };

  return data;
}

var _options = require("./validation/options");

var _patternToRegex = _interopRequireDefault(require("./pattern-to-regex"));

var _files = require("./files");

var _caching = require("./caching");

var _configDescriptors = require("./config-descriptors");

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

const debug = (0, _debug().default)("babel:config:config-chain");

function buildPresetChain(arg, context) {
  const chain = buildPresetChainWalker(arg, context);
  if (!chain) return null;
  return {
    plugins: dedupDescriptors(chain.plugins),
    presets: dedupDescriptors(chain.presets),
    options: chain.options
  };
}

const buildPresetChainWalker = makeChainWalker({
  init: arg => arg,
  root: preset => loadPresetDescriptors(preset),
  env: (preset, envName) => loadPresetEnvDescriptors(preset)(envName),
  overrides: (preset, index) => loadPresetOverridesDescriptors(preset)(index),
  overridesEnv: (preset, index, envName) => loadPresetOverridesEnvDescriptors(preset)(index)(envName)
});
exports.buildPresetChainWalker = buildPresetChainWalker;
const loadPresetDescriptors = (0, _caching.makeWeakCache)(preset => buildRootDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors));
const loadPresetEnvDescriptors = (0, _caching.makeWeakCache)(preset => (0, _caching.makeStrongCache)(envName => buildEnvDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors, envName)));
const loadPresetOverridesDescriptors = (0, _caching.makeWeakCache)(preset => (0, _caching.makeStrongCache)(index => buildOverrideDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors, index)));
const loadPresetOverridesEnvDescriptors = (0, _caching.makeWeakCache)(preset => (0, _caching.makeStrongCache)(index => (0, _caching.makeStrongCache)(envName => buildOverrideEnvDescriptors(preset, preset.alias, _configDescriptors.createUncachedDescriptors, index, envName))));

function buildRootChain(opts, context) {
  const programmaticChain = loadProgrammaticChain({
    options: opts,
    dirname: context.cwd
  }, context);
  if (!programmaticChain) return null;
  let configFile;

  if (typeof opts.configFile === "string") {
    configFile = (0, _files.loadConfig)(opts.configFile, context.cwd, context.envName, context.caller);
  } else if (opts.configFile !== false) {
    configFile = (0, _files.findRootConfig)(context.root, context.envName, context.caller);
  }

  let {
    babelrc,
    babelrcRoots
  } = opts;
  const configFileChain = emptyChain();

  if (configFile) {
    const validatedFile = validateConfigFile(configFile);
    const result = loadFileChain(validatedFile, context);
    if (!result) return null;

    if (babelrc === undefined) {
      babelrc = validatedFile.options.babelrc;
    }

    if (babelrcRoots === undefined) {
      babelrcRoots = validatedFile.options.babelrcRoots;
    }

    mergeChain(configFileChain, result);
  }

  const pkgData = typeof context.filename === "string" ? (0, _files.findPackageData)(context.filename) : null;
  let ignoreFile, babelrcFile;
  const fileChain = emptyChain();

  if ((babelrc === true || babelrc === undefined) && pkgData && babelrcLoadEnabled(context, pkgData, babelrcRoots)) {
    ({
      ignore: ignoreFile,
      config: babelrcFile
    } = (0, _files.findRelativeConfig)(pkgData, context.envName, context.caller));

    if (ignoreFile && shouldIgnore(context, ignoreFile.ignore, null, ignoreFile.dirname)) {
      return null;
    }

    if (babelrcFile) {
      const result = loadFileChain(validateBabelrcFile(babelrcFile), context);
      if (!result) return null;
      mergeChain(fileChain, result);
    }
  }

  const chain = mergeChain(mergeChain(mergeChain(emptyChain(), configFileChain), fileChain), programmaticChain);
  return {
    plugins: dedupDescriptors(chain.plugins),
    presets: dedupDescriptors(chain.presets),
    options: chain.options.map(o => normalizeOptions(o)),
    ignore: ignoreFile || undefined,
    babelrc: babelrcFile || undefined,
    config: configFile || undefined
  };
}

function babelrcLoadEnabled(context, pkgData, babelrcRoots) {
  if (typeof babelrcRoots === "boolean") return babelrcRoots;
  const absoluteRoot = context.root;

  if (babelrcRoots === undefined) {
    return pkgData.directories.indexOf(absoluteRoot) !== -1;
  }

  let babelrcPatterns = babelrcRoots;
  if (!Array.isArray(babelrcPatterns)) babelrcPatterns = [babelrcPatterns];
  babelrcPatterns = babelrcPatterns.map(pat => {
    return typeof pat === "string" ? _path().default.resolve(context.cwd, pat) : pat;
  });

  if (babelrcPatterns.length === 1 && babelrcPatterns[0] === absoluteRoot) {
    return pkgData.directories.indexOf(absoluteRoot) !== -1;
  }

  return babelrcPatterns.some(pat => {
    if (typeof pat === "string") pat = (0, _patternToRegex.default)(pat, context.cwd);
    return pkgData.directories.some(directory => {
      return matchPattern(pat, context.cwd, directory, context);
    });
  });
}

const validateConfigFile = (0, _caching.makeWeakCache)(file => ({
  filepath: file.filepath,
  dirname: file.dirname,
  options: (0, _options.validate)("configfile", file.options)
}));
const validateBabelrcFile = (0, _caching.makeWeakCache)(file => ({
  filepath: file.filepath,
  dirname: file.dirname,
  options: (0, _options.validate)("babelrcfile", file.options)
}));
const validateExtendFile = (0, _caching.makeWeakCache)(file => ({
  filepath: file.filepath,
  dirname: file.dirname,
  options: (0, _options.validate)("extendsfile", file.options)
}));
const loadProgrammaticChain = makeChainWalker({
  root: input => buildRootDescriptors(input, "base", _configDescriptors.createCachedDescriptors),
  env: (input, envName) => buildEnvDescriptors(input, "base", _configDescriptors.createCachedDescriptors, envName),
  overrides: (input, index) => buildOverrideDescriptors(input, "base", _configDescriptors.createCachedDescriptors, index),
  overridesEnv: (input, index, envName) => buildOverrideEnvDescriptors(input, "base", _configDescriptors.createCachedDescriptors, index, envName)
});
const loadFileChain = makeChainWalker({
  root: file => loadFileDescriptors(file),
  env: (file, envName) => loadFileEnvDescriptors(file)(envName),
  overrides: (file, index) => loadFileOverridesDescriptors(file)(index),
  overridesEnv: (file, index, envName) => loadFileOverridesEnvDescriptors(file)(index)(envName)
});
const loadFileDescriptors = (0, _caching.makeWeakCache)(file => buildRootDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors));
const loadFileEnvDescriptors = (0, _caching.makeWeakCache)(file => (0, _caching.makeStrongCache)(envName => buildEnvDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors, envName)));
const loadFileOverridesDescriptors = (0, _caching.makeWeakCache)(file => (0, _caching.makeStrongCache)(index => buildOverrideDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors, index)));
const loadFileOverridesEnvDescriptors = (0, _caching.makeWeakCache)(file => (0, _caching.makeStrongCache)(index => (0, _caching.makeStrongCache)(envName => buildOverrideEnvDescriptors(file, file.filepath, _configDescriptors.createUncachedDescriptors, index, envName))));

function buildRootDescriptors({
  dirname,
  options
}, alias, descriptors) {
  return descriptors(dirname, options, alias);
}

function buildEnvDescriptors({
  dirname,
  options
}, alias, descriptors, envName) {
  const opts = options.env && options.env[envName];
  return opts ? descriptors(dirname, opts, `${alias}.env["${envName}"]`) : null;
}

function buildOverrideDescriptors({
  dirname,
  options
}, alias, descriptors, index) {
  const opts = options.overrides && options.overrides[index];
  if (!opts) throw new Error("Assertion failure - missing override");
  return descriptors(dirname, opts, `${alias}.overrides[${index}]`);
}

function buildOverrideEnvDescriptors({
  dirname,
  options
}, alias, descriptors, index, envName) {
  const override = options.overrides && options.overrides[index];
  if (!override) throw new Error("Assertion failure - missing override");
  const opts = override.env && override.env[envName];
  return opts ? descriptors(dirname, opts, `${alias}.overrides[${index}].env["${envName}"]`) : null;
}

function makeChainWalker({
  root,
  env,
  overrides,
  overridesEnv
}) {
  return (input, context, files = new Set()) => {
    const {
      dirname
    } = input;
    const flattenedConfigs = [];
    const rootOpts = root(input);

    if (configIsApplicable(rootOpts, dirname, context)) {
      flattenedConfigs.push(rootOpts);
      const envOpts = env(input, context.envName);

      if (envOpts && configIsApplicable(envOpts, dirname, context)) {
        flattenedConfigs.push(envOpts);
      }

      (rootOpts.options.overrides || []).forEach((_, index) => {
        const overrideOps = overrides(input, index);

        if (configIsApplicable(overrideOps, dirname, context)) {
          flattenedConfigs.push(overrideOps);
          const overrideEnvOpts = overridesEnv(input, index, context.envName);

          if (overrideEnvOpts && configIsApplicable(overrideEnvOpts, dirname, context)) {
            flattenedConfigs.push(overrideEnvOpts);
          }
        }
      });
    }

    if (flattenedConfigs.some(({
      options: {
        ignore,
        only
      }
    }) => shouldIgnore(context, ignore, only, dirname))) {
      return null;
    }

    const chain = emptyChain();

    for (const op of flattenedConfigs) {
      if (!mergeExtendsChain(chain, op.options, dirname, context, files)) {
        return null;
      }

      mergeChainOpts(chain, op);
    }

    return chain;
  };
}

function mergeExtendsChain(chain, opts, dirname, context, files) {
  if (opts.extends === undefined) return true;
  const file = (0, _files.loadConfig)(opts.extends, dirname, context.envName, context.caller);

  if (files.has(file)) {
    throw new Error(`Configuration cycle detected loading ${file.filepath}.\n` + `File already loaded following the config chain:\n` + Array.from(files, file => ` - ${file.filepath}`).join("\n"));
  }

  files.add(file);
  const fileChain = loadFileChain(validateExtendFile(file), context, files);
  files.delete(file);
  if (!fileChain) return false;
  mergeChain(chain, fileChain);
  return true;
}

function mergeChain(target, source) {
  target.options.push(...source.options);
  target.plugins.push(...source.plugins);
  target.presets.push(...source.presets);
  return target;
}

function mergeChainOpts(target, {
  options,
  plugins,
  presets
}) {
  target.options.push(options);
  target.plugins.push(...plugins());
  target.presets.push(...presets());
  return target;
}

function emptyChain() {
  return {
    options: [],
    presets: [],
    plugins: []
  };
}

function normalizeOptions(opts) {
  const options = Object.assign({}, opts);
  delete options.extends;
  delete options.env;
  delete options.overrides;
  delete options.plugins;
  delete options.presets;
  delete options.passPerPreset;
  delete options.ignore;
  delete options.only;
  delete options.test;
  delete options.include;
  delete options.exclude;

  if (options.hasOwnProperty("sourceMap")) {
    options.sourceMaps = options.sourceMap;
    delete options.sourceMap;
  }

  return options;
}

function dedupDescriptors(items) {
  const map = new Map();
  const descriptors = [];

  for (const item of items) {
    if (typeof item.value === "function") {
      const fnKey = item.value;
      let nameMap = map.get(fnKey);

      if (!nameMap) {
        nameMap = new Map();
        map.set(fnKey, nameMap);
      }

      let desc = nameMap.get(item.name);

      if (!desc) {
        desc = {
          value: item
        };
        descriptors.push(desc);
        if (!item.ownPass) nameMap.set(item.name, desc);
      } else {
        desc.value = item;
      }
    } else {
      descriptors.push({
        value: item
      });
    }
  }

  return descriptors.reduce((acc, desc) => {
    acc.push(desc.value);
    return acc;
  }, []);
}

function configIsApplicable({
  options
}, dirname, context) {
  return (options.test === undefined || configFieldIsApplicable(context, options.test, dirname)) && (options.include === undefined || configFieldIsApplicable(context, options.include, dirname)) && (options.exclude === undefined || !configFieldIsApplicable(context, options.exclude, dirname));
}

function configFieldIsApplicable(context, test, dirname) {
  const patterns = Array.isArray(test) ? test : [test];
  return matchesPatterns(context, patterns, dirname);
}

function shouldIgnore(context, ignore, only, dirname) {
  if (ignore && matchesPatterns(context, ignore, dirname)) {
    debug("Ignored %o because it matched one of %O from %o", context.filename, ignore, dirname);
    return true;
  }

  if (only && !matchesPatterns(context, only, dirname)) {
    debug("Ignored %o because it failed to match one of %O from %o", context.filename, only, dirname);
    return true;
  }

  return false;
}

function matchesPatterns(context, patterns, dirname) {
  return patterns.some(pattern => matchPattern(pattern, dirname, context.filename, context));
}

function matchPattern(pattern, dirname, pathToTest, context) {
  if (typeof pattern === "function") {
    return !!pattern(pathToTest, {
      dirname,
      envName: context.envName,
      caller: context.caller
    });
  }

  if (typeof pathToTest !== "string") {
    throw new Error(`Configuration contains string/RegExp pattern, but no filename was passed to Babel`);
  }

  if (typeof pattern === "string") {
    pattern = (0, _patternToRegex.default)(pattern, dirname);
  }

  return pattern.test(pathToTest);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AYmFiZWwvY29yZS9saWIvY29uZmlnL2NvbmZpZy1jaGFpbi5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImJ1aWxkUHJlc2V0Q2hhaW4iLCJidWlsZFJvb3RDaGFpbiIsImJ1aWxkUHJlc2V0Q2hhaW5XYWxrZXIiLCJfcGF0aCIsImRhdGEiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kZWJ1ZyIsIl9vcHRpb25zIiwiX3BhdHRlcm5Ub1JlZ2V4IiwiX2ZpbGVzIiwiX2NhY2hpbmciLCJfY29uZmlnRGVzY3JpcHRvcnMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImRlYnVnIiwiYXJnIiwiY29udGV4dCIsImNoYWluIiwicGx1Z2lucyIsImRlZHVwRGVzY3JpcHRvcnMiLCJwcmVzZXRzIiwib3B0aW9ucyIsIm1ha2VDaGFpbldhbGtlciIsImluaXQiLCJyb290IiwicHJlc2V0IiwibG9hZFByZXNldERlc2NyaXB0b3JzIiwiZW52IiwiZW52TmFtZSIsImxvYWRQcmVzZXRFbnZEZXNjcmlwdG9ycyIsIm92ZXJyaWRlcyIsImluZGV4IiwibG9hZFByZXNldE92ZXJyaWRlc0Rlc2NyaXB0b3JzIiwib3ZlcnJpZGVzRW52IiwibG9hZFByZXNldE92ZXJyaWRlc0VudkRlc2NyaXB0b3JzIiwibWFrZVdlYWtDYWNoZSIsImJ1aWxkUm9vdERlc2NyaXB0b3JzIiwiYWxpYXMiLCJjcmVhdGVVbmNhY2hlZERlc2NyaXB0b3JzIiwibWFrZVN0cm9uZ0NhY2hlIiwiYnVpbGRFbnZEZXNjcmlwdG9ycyIsImJ1aWxkT3ZlcnJpZGVEZXNjcmlwdG9ycyIsImJ1aWxkT3ZlcnJpZGVFbnZEZXNjcmlwdG9ycyIsIm9wdHMiLCJwcm9ncmFtbWF0aWNDaGFpbiIsImxvYWRQcm9ncmFtbWF0aWNDaGFpbiIsImRpcm5hbWUiLCJjd2QiLCJjb25maWdGaWxlIiwibG9hZENvbmZpZyIsImNhbGxlciIsImZpbmRSb290Q29uZmlnIiwiYmFiZWxyYyIsImJhYmVscmNSb290cyIsImNvbmZpZ0ZpbGVDaGFpbiIsImVtcHR5Q2hhaW4iLCJ2YWxpZGF0ZWRGaWxlIiwidmFsaWRhdGVDb25maWdGaWxlIiwicmVzdWx0IiwibG9hZEZpbGVDaGFpbiIsInVuZGVmaW5lZCIsIm1lcmdlQ2hhaW4iLCJwa2dEYXRhIiwiZmlsZW5hbWUiLCJmaW5kUGFja2FnZURhdGEiLCJpZ25vcmVGaWxlIiwiYmFiZWxyY0ZpbGUiLCJmaWxlQ2hhaW4iLCJiYWJlbHJjTG9hZEVuYWJsZWQiLCJpZ25vcmUiLCJjb25maWciLCJmaW5kUmVsYXRpdmVDb25maWciLCJzaG91bGRJZ25vcmUiLCJ2YWxpZGF0ZUJhYmVscmNGaWxlIiwibWFwIiwibyIsIm5vcm1hbGl6ZU9wdGlvbnMiLCJhYnNvbHV0ZVJvb3QiLCJkaXJlY3RvcmllcyIsImluZGV4T2YiLCJiYWJlbHJjUGF0dGVybnMiLCJBcnJheSIsImlzQXJyYXkiLCJwYXQiLCJyZXNvbHZlIiwibGVuZ3RoIiwic29tZSIsImRpcmVjdG9yeSIsIm1hdGNoUGF0dGVybiIsImZpbGUiLCJmaWxlcGF0aCIsInZhbGlkYXRlIiwidmFsaWRhdGVFeHRlbmRGaWxlIiwiaW5wdXQiLCJjcmVhdGVDYWNoZWREZXNjcmlwdG9ycyIsImxvYWRGaWxlRGVzY3JpcHRvcnMiLCJsb2FkRmlsZUVudkRlc2NyaXB0b3JzIiwibG9hZEZpbGVPdmVycmlkZXNEZXNjcmlwdG9ycyIsImxvYWRGaWxlT3ZlcnJpZGVzRW52RGVzY3JpcHRvcnMiLCJkZXNjcmlwdG9ycyIsIkVycm9yIiwib3ZlcnJpZGUiLCJmaWxlcyIsIlNldCIsImZsYXR0ZW5lZENvbmZpZ3MiLCJyb290T3B0cyIsImNvbmZpZ0lzQXBwbGljYWJsZSIsInB1c2giLCJlbnZPcHRzIiwiZm9yRWFjaCIsIl8iLCJvdmVycmlkZU9wcyIsIm92ZXJyaWRlRW52T3B0cyIsIm9ubHkiLCJvcCIsIm1lcmdlRXh0ZW5kc0NoYWluIiwibWVyZ2VDaGFpbk9wdHMiLCJleHRlbmRzIiwiaGFzIiwiZnJvbSIsImpvaW4iLCJhZGQiLCJkZWxldGUiLCJ0YXJnZXQiLCJzb3VyY2UiLCJhc3NpZ24iLCJwYXNzUGVyUHJlc2V0IiwidGVzdCIsImluY2x1ZGUiLCJleGNsdWRlIiwiaGFzT3duUHJvcGVydHkiLCJzb3VyY2VNYXBzIiwic291cmNlTWFwIiwiaXRlbXMiLCJNYXAiLCJpdGVtIiwiZm5LZXkiLCJuYW1lTWFwIiwiZ2V0Iiwic2V0IiwiZGVzYyIsIm5hbWUiLCJvd25QYXNzIiwicmVkdWNlIiwiYWNjIiwiY29uZmlnRmllbGRJc0FwcGxpY2FibGUiLCJwYXR0ZXJucyIsIm1hdGNoZXNQYXR0ZXJucyIsInBhdHRlcm4iLCJwYXRoVG9UZXN0Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztBQUMzQ0MsRUFBQUEsS0FBSyxFQUFFO0FBRG9DLENBQTdDO0FBR0FELE9BQU8sQ0FBQ0UsZ0JBQVIsR0FBMkJBLGdCQUEzQjtBQUNBRixPQUFPLENBQUNHLGNBQVIsR0FBeUJBLGNBQXpCO0FBQ0FILE9BQU8sQ0FBQ0ksc0JBQVIsR0FBaUMsS0FBSyxDQUF0Qzs7QUFFQSxTQUFTQyxLQUFULEdBQWlCO0FBQ2YsUUFBTUMsSUFBSSxHQUFHQyxzQkFBc0IsQ0FBQ0MsT0FBTyxDQUFDLE1BQUQsQ0FBUixDQUFuQzs7QUFFQUgsRUFBQUEsS0FBSyxHQUFHLFlBQVk7QUFDbEIsV0FBT0MsSUFBUDtBQUNELEdBRkQ7O0FBSUEsU0FBT0EsSUFBUDtBQUNEOztBQUVELFNBQVNHLE1BQVQsR0FBa0I7QUFDaEIsUUFBTUgsSUFBSSxHQUFHQyxzQkFBc0IsQ0FBQ0MsT0FBTyxDQUFDLE9BQUQsQ0FBUixDQUFuQzs7QUFFQUMsRUFBQUEsTUFBTSxHQUFHLFlBQVk7QUFDbkIsV0FBT0gsSUFBUDtBQUNELEdBRkQ7O0FBSUEsU0FBT0EsSUFB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QztBQUMvQkEsSUFBQUEsT0FBTyxHQUFHLENBQUMsR0FBRzdJLGVBQWUsQ0FBQ00sT0FBcEIsRUFBNkJ1SSxPQUE3QixFQUFzQ3RHLE9BQXRDLENBQVY7QUFDRDs7QUFFRCxTQUFPc0csT0FBTyxDQUFDckIsSUFBUixDQUFhc0IsVUFBYixDQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuYnVpbGRQcmVzZXRDaGFpbiA9IGJ1aWxkUHJlc2V0Q2hhaW47XG5leHBvcnRzLmJ1aWxkUm9vdENoYWluID0gYnVpbGRSb290Q2hhaW47XG5leHBvcnRzLmJ1aWxkUHJlc2V0Q2hhaW5XYWxrZXIgPSB2b2lkIDA7XG5cbmZ1bmN0aW9uIF9wYXRoKCkge1xuICBjb25zdCBkYXRhID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicGF0aFwiKSk7XG5cbiAgX3BhdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIF9kZWJ1ZygpIHtcbiAgY29uc3QgZGF0YSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImRlYnVnXCIpKTtcblxuICBfZGVidWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbnZhciBfb3B0aW9ucyA9IHJlcXVpcmUoXCIuL3ZhbGlkYXRpb24vb3B0aW9uc1wiKTtcblxudmFyIF9wYXR0ZXJuVG9SZWdleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcGF0dGVybi10by1yZWdleFwiKSk7XG5cbnZhciBfZmlsZXMgPSByZXF1aXJlKFwiLi9maWxlc1wiKTtcblxudmFyIF9jYWNoaW5nID0gcmVxdWlyZShcIi4vY2FjaGluZ1wiKTtcblxudmFyIF9jb25maWdEZXNjcmlwdG9ycyA9IHJlcXVpcmUoXCIuL2NvbmZpZy1kZXNjcmlwdG9yc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuY29uc3QgZGVidWcgPSAoMCwgX2RlYnVnKCkuZGVmYXVsdCkoXCJiYWJlbDpjb25maWc6Y29uZmlnLWNoYWluXCIpO1xuXG5mdW5jdGlvbiBidWlsZFByZXNldENoYWluKGFyZywgY29udGV4dCkge1xuICBjb25zdCBjaGFpbiA9IGJ1aWxkUHJlc2V0Q2hhaW5XYWxrZXIoYXJnLCBjb250ZXh0KTtcbiAgaWYgKCFjaGFpbikgcmV0dXJuIG51bGw7XG4gIHJldHVybiB7XG4gICAgcGx1Z2luczogZGVkdXBEZXNjcmlwdG9ycyhjaGFpbi5wbHVnaW5zKSxcbiAgICBwcmVzZXRzOiBkZWR1cERlc2NyaXB0b3JzKGNoYWluLnByZXNldHMpLFxuICAgIG9wdGlvbnM6IGNoYWluLm9wdGlvbnNcbiAgfTtcbn1cblxuY29uc3QgYnVpbGRQcmVzZXRDaGFpbldhbGtlciA9IG1ha2VDaGFpbldhbGtlcih7XG4gIGluaXQ6IGFyZyA9PiBhcmcsXG4gIHJvb3Q6IHByZXNldCA9PiBsb2FkUHJlc2V0RGVzY3JpcHRvcnMocHJlc2V0KSxcbiAgZW52OiAocHJlc2V0LCBlbnZOYW1lKSA9PiBsb2FkUHJlc2V0RW52RGVzY3JpcHRvcnMocHJlc2V0KShlbnZOYW1lKSxcbiAgb3ZlcnJpZGVzOiAocHJlc2V0LCBpbmRleCkgPT4gbG9hZFByZXNldE92ZXJyaWRlc0Rlc2NyaXB0b3JzKHByZXNldCkoaW5kZXgpLFxuICBvdmVycmlkZXNFbnY6IChwcmVzZXQsIGluZGV4LCBlbnZOYW1lKSA9PiBsb2FkUHJlc2V0T3ZlcnJpZGVzRW52RGVzY3JpcHRvcnMocHJlc2V0KShpbmRleCkoZW52TmFtZSlcbn0pO1xuZXhwb3J0cy5idWlsZFByZXNldENoYWluV2Fsa2VyID0gYnVpbGRQcmVzZXRDaGFpbldhbGtlcjtcbmNvbnN0IGxvYWRQcmVzZXREZXNjcmlwdG9ycyA9ICgwLCBfY2FjaGluZy5tYWtlV2Vha0NhY2hlKShwcmVzZXQgPT4gYnVpbGRSb290RGVzY3JpcHRvcnMocHJlc2V0LCBwcmVzZXQuYWxpYXMsIF9jb25maWdEZXNjcmlwdG9ycy5jcmVhdGVVbmNhY2hlZERlc2NyaXB0b3JzKSk7XG5jb25zdCBsb2FkUHJlc2V0RW52RGVzY3JpcHRvcnMgPSAoMCwgX2NhY2hpbmcubWFrZVdlYWtDYWNoZSkocHJlc2V0ID0+ICgwLCBfY2FjaGluZy5tYWtlU3Ryb25nQ2FjaGUpKGVudk5hbWUgPT4gYnVpbGRFbnZEZXNjcmlwdG9ycyhwcmVzZXQsIHByZXNldC5hbGlhcywgX2NvbmZpZ0Rlc2NyaXB0b3JzLmNyZWF0ZVVuY2FjaGVkRGVzY3JpcHRvcnMsIGVudk5hbWUpKSk7XG5jb25zdCBsb2FkUHJlc2V0T3ZlcnJpZGVzRGVzY3JpcHRvcnMgPSAoMCwgX2NhY2hpbmcubWFrZVdlYWtDYWNoZSkocHJlc2V0ID0+ICgwLCBfY2FjaGluZy5tYWtlU3Ryb25nQ2FjaGUpKGluZGV4ID0+IGJ1aWxkT3ZlcnJpZGVEZXNjcmlwdG9ycyhwcmVzZXQsIHByZXNldC5hbGlhcywgX2NvbmZpZ0Rlc2NyaXB0b3JzLmNyZWF0ZVVuY2FjaGVkRGVzY3JpcHRvcnMsIGluZGV4KSkpO1xuY29uc3QgbG9hZFByZXNldE92ZXJyaWRlc0VudkRlc2NyaXB0b3JzID0gKDAsIF9jYWNoaW5nLm1ha2VXZWFrQ2FjaGUpKHByZXNldCA9PiAoMCwgX2NhY2hpbmcubWFrZVN0cm9uZ0NhY2hlKShpbmRleCA9PiAoMCwgX2NhY2hpbmcubWFrZVN0cm9uZ0NhY2hlKShlbnZOYW1lID0+IGJ1aWxkT3ZlcnJpZGVFbnZEZXNjcmlwdG9ycyhwcmVzZXQsIHByZXNldC5hbGlhcywgX2NvbmZpZ0Rlc2NyaXB0b3JzLmNyZWF0ZVVuY2FjaGVkRGVzY3JpcHRvcnMsIGluZGV4LCBlbnZOYW1lKSkpKTtcblxuZnVuY3Rpb24gYnVpbGRSb290Q2hhaW4ob3B0cywgY29udGV4dCkge1xuICBjb25zdCBwcm9ncmFtbWF0aWNDaGFpbiA9IGxvYWRQcm9ncmFtbWF0aWNDaGFpbih7XG4gICAgb3B0aW9uczogb3B0cyxcbiAgICBkaXJuYW1lOiBjb250ZXh0LmN3ZFxuICB9LCBjb250ZXh0KTtcbiAgaWYgKCFwcm9ncmFtbWF0aWNDaGFpbikgcmV0dXJuIG51bGw7XG4gIGxldCBjb25maWdGaWxlO1xuXG4gIGlmICh0eXBlb2Ygb3B0cy5jb25maWdGaWxlID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uZmlnRmlsZSA9ICgwLCBfZmlsZXMubG9hZENvbmZpZykob3B0cy5jb25maWdGaWxlLCBjb250ZXh0LmN3ZCwgY29udGV4dC5lbnZOYW1lLCBjb250ZXh0LmNhbGxlcik7XG4gIH0gZWxzZSBpZiAob3B0cy5jb25maWdGaWxlICE9PSBmYWxzZSkge1xuICAgIGNvbmZpZ0ZpbGUgPSAoMCwgX2ZpbGVzLmZpbmRSb290Q29uZmlnKShjb250ZXh0LnJvb3QsIGNvbnRleHQuZW52TmFtZSwgY29udGV4dC5jYWxsZXIpO1xuICB9XG5cbiAgbGV0IHtcbiAgICBiYWJlbHJjLFxuICAgIGJhYmVscmNSb290c1xuICB9ID0gb3B0cztcbiAgY29uc3QgY29uZmlnRmlsZUNoYWluID0gZW1wdHlDaGFpbigpO1xuXG4gIGlmIChjb25maWdGaWxlKSB7XG4gICAgY29uc3QgdmFsaWRhdGVkRmlsZSA9IHZhbGlkYXRlQ29uZmlnRmlsZShjb25maWdGaWxlKTtcbiAgICBjb25zdCByZXN1bHQgPSBsb2FkRmlsZUNoYWluKHZhbGlkYXRlZEZpbGUsIGNvbnRleHQpO1xuICAgIGlmICghcmVzdWx0KSByZXR1cm4gbnVsbDtcblxuICAgIGlmIChiYWJlbHJjID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGJhYmVscmMgPSB2YWxpZGF0ZWRGaWxlLm9wdGlvbnMuYmFiZWxyYztcbiAgICB9XG5cbiAgICBpZiAoYmFiZWxyY1Jvb3RzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGJhYmVscmNSb290cyA9IHZhbGlkYXRlZEZpbGUub3B0aW9ucy5iYWJlbHJjUm9vdHM7XG4gICAgfVxuXG4gICAgbWVyZ2VDaGFpbihjb25maWdGaWxlQ2hhaW4sIHJlc3VsdCk7XG4gIH1cblxuICBjb25zdCBwa2dEYXRhID0gdHlwZW9mIGNvbnRleHQuZmlsZW5hbWUgPT09IFwic3RyaW5nXCIgPyAoMCwgX2ZpbGVzLmZpbmRQYWNrYWdlRGF0YSkoY29udGV4dC5maWxlbmFtZSkgOiBudWxsO1xuICBsZXQgaWdub3JlRmlsZSwgYmFiZWxyY0ZpbGU7XG4gIGNvbnN0IGZpbGVDaGFpbiA9IGVtcHR5Q2hhaW4oKTtcblxuICBpZiAoKGJhYmVscmMgPT09IHRydWUgfHwgYmFiZWxyYyA9PT0gdW5kZWZpbmVkKSAmJiBwa2dEYXRhICYmIGJhYmVscmNMb2FkRW5hYmxlZChjb250ZXh0LCBwa2dEYXRhLCBiYWJlbHJjUm9vdHMpKSB7XG4gICAgKHtcbiAgICAgIGlnbm9yZTogaWdub3JlRmlsZSxcbiAgICAgIGNvbmZpZzogYmFiZWxyY0ZpbGVcbiAgICB9ID0gKDAsIF9maWxlcy5maW5kUmVsYXRpdmVDb25maWcpKHBrZ0RhdGEsIGNvbnRleHQuZW52TmFtZSwgY29udGV4dC5jYWxsZXIpKTtcblxuICAgIGlmIChpZ25vcmVGaWxlICYmIHNob3VsZElnbm9yZShjb250ZXh0LCBpZ25vcmVGaWxlLmlnbm9yZSwgbnVsbCwgaWdub3JlRmlsZS5kaXJuYW1lKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGJhYmVscmNGaWxlKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBsb2FkRmlsZUNoYWluKHZhbGlkYXRlQmFiZWxyY0ZpbGUoYmFiZWxyY0ZpbGUpLCBjb250ZXh0KTtcbiAgICAgIGlmICghcmVzdWx0KSByZXR1cm4gbnVsbDtcbiAgICAgIG1lcmdlQ2hhaW4oZmlsZUNoYWluLCByZXN1bHQpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNoYWluID0gbWVyZ2VDaGFpbihtZXJnZUNoYWluKG1lcmdlQ2hhaW4oZW1wdHlDaGFpbigpLCBjb25maWdGaWxlQ2hhaW4pLCBmaWxlQ2hhaW4pLCBwcm9ncmFtbWF0aWNDaGFpbik7XG4gIHJldHVybiB7XG4gICAgcGx1Z2luczogZGVkdXBEZXNjcmlwdG9ycyhjaGFpbi5wbHVnaW5zKSxcbiAgICBwcmVzZXRzOiBkZWR1cERlc2NyaXB0b3JzKGNoYWluLnByZXNldHMpLFxuICAgIG9wdGlvbnM6IGNoYWluLm9wdGlvbnMubWFwKG8gPT4gbm9ybWFsaXplT3B0aW9ucyhvKSksXG4gICAgaWdub3JlOiBpZ25vcmVGaWxlIHx8IHVuZGVmaW5lZCxcbiAgICBiYWJlbHJjOiBiYWJlbHJjRmlsZSB8fCB1bmRlZmluZWQsXG4gICAgY29uZmlnOiBjb25maWdGaWxlIHx8IHVuZGVmaW5lZFxuICB9O1xufVxuXG5mdW5jdGlvbiBiYWJlbHJjTG9hZEVuYWJsZWQoY29udGV4dCwgcGtnRGF0YSwgYmFiZWxyY1Jvb3RzKSB7XG4gIGlmICh0eXBlb2YgYmFiZWxyY1Jvb3RzID09PSBcImJvb2xlYW5cIikgcmV0dXJuIGJhYmVscmNSb290cztcbiAgY29uc3QgYWJzb2x1dGVSb290ID0gY29udGV4dC5yb290O1xuXG4gIGlmIChiYWJlbHJjUm9vdHMgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBwa2dEYXRhLmRpcmVjdG9yaWVzLmluZGV4T2YoYWJzb2x1dGVSb290KSAhPT0gLTE7XG4gIH1cblxuICBsZXQgYmFiZWxyY1BhdHRlcm5zID0gYmFiZWxyY1Jvb3RzO1xuICBpZiAoIUFycmF5LmlzQXJyYXkoYmFiZWxyY1BhdHRlcm5zKSkgYmFiZWxyY1BhdHRlcm5zID0gW2JhYmVscmNQYXR0ZXJuc107XG4gIGJhYmVscmNQYXR0ZXJucyA9IGJhYmVscmNQYXR0ZXJucy5tYXAocGF0ID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIHBhdCA9PT0gXCJzdHJpbmdcIiA/IF9wYXRoKCkuZGVmYXVsdC5yZXNvbHZlKGNvbnRleHQuY3dkLCBwYXQpIDogcGF0O1xuICB9KTtcblxuICBpZiAoYmFiZWxyY1BhdHRlcm5zLmxlbmd0aCA9PT0gMSAmJiBiYWJlbHJjUGF0dGVybnNbMF0gPT09IGFic29sdXRlUm9vdCkge1xuICAgIHJldHVybiBwa2dEYXRhLmRpcmVjdG9yaWVzLmluZGV4T2YoYWJzb2x1dGVSb290KSAhPT0gLTE7XG4gIH1cblxuICByZXR1cm4gYmFiZWxyY1BhdHRlcm5zLnNvbWUocGF0ID0+IHtcbiAgICBpZiAodHlwZW9mIHBhdCA9PT0gXCJzdHJpbmdcIikgcGF0ID0gKDAsIF9wYXR0ZXJuVG9SZWdleC5kZWZhdWx0KShwYXQsIGNvbnRleHQuY3dkKTtcbiAgICByZXR1cm4gcGtnRGF0YS5kaXJlY3Rvcmllcy5zb21lKGRpcmVjdG9yeSA9PiB7XG4gICAgICByZXR1cm4gbWF0Y2hQYXR0ZXJuKHBhdCwgY29udGV4dC5jd2QsIGRpcmVjdG9yeSwgY29udGV4dCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5jb25zdCB2YWxpZGF0ZUNvbmZpZ0ZpbGUgPSAoMCwgX2NhY2hpbmcubWFrZVdlYWtDYWNoZSkoZmlsZSA9PiAoe1xuICBmaWxlcGF0aDogZmlsZS5maWxlcGF0aCxcbiAgZGlybmFtZTogZmlsZS5kaXJuYW1lLFxuICBvcHRpb25zOiAoMCwgX29wdGlvbnMudmFsaWRhdGUpKFwiY29uZmlnZmlsZVwiLCBmaWxlLm9wdGlvbnMpXG59KSk7XG5jb25zdCB2YWxpZGF0ZUJhYmVscmNGaWxlID0gKDAsIF9jYWNoaW5nLm1ha2VXZWFrQ2FjaGUpKGZpbGUgPT4gKHtcbiAgZmlsZXBhdGg6IGZpbGUuZmlsZXBhdGgsXG4gIGRpcm5hbWU6IGZpbGUuZGlybmFtZSxcbiAgb3B0aW9uczogKDAsIF9vcHRpb25zLnZhbGlkYXRlKShcImJhYmVscmNmaWxlXCIsIGZpbGUub3B0aW9ucylcbn0pKTtcbmNvbnN0IHZhbGlkYXRlRXh0ZW5kRmlsZSA9ICgwLCBfY2FjaGluZy5tYWtlV2Vha0NhY2hlKShmaWxlID0+ICh7XG4gIGZpbGVwYXRoOiBmaWxlLmZpbGVwYXRoLFxuICBkaXJuYW1lOiBmaWxlLmRpcm5hbWUsXG4gIG9wdGlvbnM6ICgwLCBfb3B0aW9ucy52YWxpZGF0ZSkoXCJleHRlbmRzZmlsZVwiLCBmaWxlLm9wdGlvbnMpXG59KSk7XG5jb25zdCBsb2FkUHJvZ3JhbW1hdGljQ2hhaW4gPSBtYWtlQ2hhaW5XYWxrZXIoe1xuICByb290OiBpbnB1dCA9PiBidWlsZFJvb3REZXNjcmlwdG9ycyhpbnB1dCwgXCJiYXNlXCIsIF9jb25maWdEZXNjcmlwdG9ycy5jcmVhdGVDYWNoZWREZXNjcmlwdG9ycyksXG4gIGVudjogKGlucHV0LCBlbnZOYW1lKSA9PiBidWlsZEVudkRlc2NyaXB0b3JzKGlucHV0LCBcImJhc2VcIiwgX2NvbmZpZ0Rlc2NyaXB0b3JzLmNyZWF0ZUNhY2hlZERlc2NyaXB0b3JzLCBlbnZOYW1lKSxcbiAgb3ZlcnJpZGVzOiAoaW5wdXQsIGluZGV4KSA9PiBidWlsZE92ZXJyaWRlRGVzY3JpcHRvcnMoaW5wdXQsIFwiYmFzZVwiLCBfY29uZmlnRGVzY3JpcHRvcnMuY3JlYXRlQ2FjaGVkRGVzY3JpcHRvcnMsIGluZGV4KSxcbiAgb3ZlcnJpZGVzRW52OiAoaW5wdXQsIGluZGV4LCBlbnZOYW1lKSA9PiBidWlsZE92ZXJyaWRlRW52RGVzY3JpcHRvcnMoaW5wdXQsIFwiYmFzZVwiLCBfY29uZmlnRGVzY3JpcHRvcnMuY3JlYXRlQ2FjaGVkRGVzY3JpcHRvcnMsIGluZGV4LCBlbnZOYW1lKVxufSk7XG5jb25zdCBsb2FkRmlsZUNoYWluID0gbWFrZUNoYWluV2Fsa2VyKHtcbiAgcm9vdDogZmlsZSA9PiBsb2FkRmlsZURlc2NyaXB0b3JzKGZpbGUpLFxuICBlbnY6IChmaWxlLCBlbnZOYW1lKSA9PiBsb2FkRmlsZUVudkRlc2NyaXB0b3JzKGZpbGUpKGVudk5hbWUpLFxuICBvdmVycmlkZXM6IChmaWxlLCBpbmRleCkgPT4gbG9hZEZpbGVPdmVycmlkZXNEZXNjcmlwdG9ycyhmaWxlKShpbmRleCksXG4gIG92ZXJyaWRlc0VudjogKGZpbGUsIGluZGV4LCBlbnZOYW1lKSA9PiBsb2FkRmlsZU92ZXJyaWRlc0VudkRlc2NyaXB0b3JzKGZpbGUpKGluZGV4KShlbnZOYW1lKVxufSk7XG5jb25zdCBsb2FkRmlsZURlc2NyaXB0b3JzID0gKDAsIF9jYWNoaW5nLm1ha2VXZWFrQ2FjaGUpKGZpbGUgPT4gYnVpbGRSb290RGVzY3JpcHRvcnMoZmlsZSwgZmlsZS5maWxlcGF0aCwgX2NvbmZpZ0Rlc2NyaXB0b3JzLmNyZWF0ZVVuY2FjaGVkRGVzY3JpcHRvcnMpKTtcbmNvbnN0IGxvYWRGaWxlRW52RGVzY3JpcHRvcnMgPSAoMCwgX2NhY2hpbmcubWFrZVdlYWtDYWNoZSkoZmlsZSA9PiAoMCwgX2NhY2hpbmcubWFrZVN0cm9uZ0NhY2hlKShlbnZOYW1lID0+IGJ1aWxkRW52RGVzY3JpcHRvcnMoZmlsZSwgZmlsZS5maWxlcGF0aCwgX2NvbmZpZ0Rlc2NyaXB0b3JzLmNyZWF0ZVVuY2FjaGVkRGVzY3JpcHRvcnMsIGVudk5hbWUpKSk7XG5jb25zdCBsb2FkRmlsZU92ZXJyaWRlc0Rlc2NyaXB0b3JzID0gKDAsIF9jYWNoaW5nLm1ha2VXZWFrQ2FjaGUpKGZpbGUgPT4gKDAsIF9jYWNoaW5nLm1ha2VTdHJvbmdDYWNoZSkoaW5kZXggPT4gYnVpbGRPdmVycmlkZURlc2NyaXB0b3JzKGZpbGUsIGZpbGUuZmlsZXBhdGgsIF9jb25maWdEZXNjcmlwdG9ycy5jcmVhdGVVbmNhY2hlZERlc2NyaXB0b3JzLCBpbmRleCkpKTtcbmNvbnN0IGxvYWRGaWxlT3ZlcnJpZGVzRW52RGVzY3JpcHRvcnMgPSAoMCwgX2NhY2hpbmcubWFrZVdlYWtDYWNoZSkoZmlsZSA9PiAoMCwgX2NhY2hpbmcubWFrZVN0cm9uZ0NhY2hlKShpbmRleCA9PiAoMCwgX2NhY2hpbmcubWFrZVN0cm9uZ0NhY2hlKShlbnZOYW1lID0+IGJ1aWxkT3ZlcnJpZGVFbnZEZXNjcmlwdG9ycyhmaWxlLCBmaWxlLmZpbGVwYXRoLCBfY29uZmlnRGVzY3JpcHRvcnMuY3JlYXRlVW5jYWNoZWREZXNjcmlwdG9ycywgaW5kZXgsIGVudk5hbWUpKSkpO1xuXG5mdW5jdGlvbiBidWlsZFJvb3REZXNjcmlwdG9ycyh7XG4gIGRpcm5hbWUsXG4gIG9wdGlvbnNcbn0sIGFsaWFzLCBkZXNjcmlwdG9ycykge1xuICByZXR1cm4gZGVzY3JpcHRvcnMoZGlybmFtZSwgb3B0aW9ucywgYWxpYXMpO1xufVxuXG5mdW5jdGlvbiBidWlsZEVudkRlc2NyaXB0b3JzKHtcbiAgZGlybmFtZSxcbiAgb3B0aW9uc1xufSwgYWxpYXMsIGRlc2NyaXB0b3JzLCBlbnZOYW1lKSB7XG4gIGNvbnN0IG9wdHMgPSBvcHRpb25zLmVudiAmJiBvcHRpb25zLmVudltlbnZOYW1lXTtcbiAgcmV0dXJuIG9wdHMgPyBkZXNjcmlwdG9ycyhkaXJuYW1lLCBvcHRzLCBgJHthbGlhc30uZW52W1wiJHtlbnZOYW1lfVwiXWApIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gYnVpbGRPdmVycmlkZURlc2NyaXB0b3JzKHtcbiAgZGlybmFtZSxcbiAgb3B0aW9uc1xufSwgYWxpYXMsIGRlc2NyaXB0b3JzLCBpbmRleCkge1xuICBjb25zdCBvcHRzID0gb3B0aW9ucy5vdmVycmlkZXMgJiYgb3B0aW9ucy5vdmVycmlkZXNbaW5kZXhdO1xuICBpZiAoIW9wdHMpIHRocm93IG5ldyBFcnJvcihcIkFzc2VydGlvbiBmYWlsdXJlIC0gbWlzc2luZyBvdmVycmlkZVwiKTtcbiAgcmV0dXJuIGRlc2NyaXB0b3JzKGRpcm5hbWUsIG9wdHMsIGAke2FsaWFzfS5vdmVycmlkZXNbJHtpbmRleH1dYCk7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkT3ZlcnJpZGVFbnZEZXNjcmlwdG9ycyh7XG4gIGRpcm5hbWUsXG4gIG9wdGlvbnNcbn0sIGFsaWFzLCBkZXNjcmlwdG9ycywgaW5kZXgsIGVudk5hbWUpIHtcbiAgY29uc3Qgb3ZlcnJpZGUgPSBvcHRpb25zLm92ZXJyaWRlcyAmJiBvcHRpb25zLm92ZXJyaWRlc1tpbmRleF07XG4gIGlmICghb3ZlcnJpZGUpIHRocm93IG5ldyBFcnJvcihcIkFzc2VydGlvbiBmYWlsdXJlIC0gbWlzc2luZyBvdmVycmlkZVwiKTtcbiAgY29uc3Qgb3B0cyA9IG92ZXJyaWRlLmVudiAmJiBvdmVycmlkZS5lbnZbZW52TmFtZV07XG4gIHJldHVybiBvcHRzID8gZGVzY3JpcHRvcnMoZGlybmFtZSwgb3B0cywgYCR7YWxpYXN9Lm92ZXJyaWRlc1ske2luZGV4fV0uZW52W1wiJHtlbnZOYW1lfVwiXWApIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gbWFrZUNoYWluV2Fsa2VyKHtcbiAgcm9vdCxcbiAgZW52LFxuICBvdmVycmlkZXMsXG4gIG92ZXJyaWRlc0VudlxufSkge1xuICByZXR1cm4gKGlucHV0LCBjb250ZXh0LCBmaWxlcyA9IG5ldyBTZXQoKSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGRpcm5hbWVcbiAgICB9ID0gaW5wdXQ7XG4gICAgY29uc3QgZmxhdHRlbmVkQ29uZmlncyA9IFtdO1xuICAgIGNvbnN0IHJvb3RPcHRzID0gcm9vdChpbnB1dCk7XG5cbiAgICBpZiAoY29uZmlnSXNBcHBsaWNhYmxlKHJvb3RPcHRzLCBkaXJuYW1lLCBjb250ZXh0KSkge1xuICAgICAgZmxhdHRlbmVkQ29uZmlncy5wdXNoKHJvb3RPcHRzKTtcbiAgICAgIGNvbnN0IGVudk9wdHMgPSBlbnYoaW5wdXQsIGNvbnRleHQuZW52TmFtZSk7XG5cbiAgICAgIGlmIChlbnZPcHRzICYmIGNvbmZpZ0lzQXBwbGljYWJsZShlbnZPcHRzLCBkaXJuYW1lLCBjb250ZXh0KSkge1xuICAgICAgICBmbGF0dGVuZWRDb25maWdzLnB1c2goZW52T3B0cyk7XG4gICAgICB9XG5cbiAgICAgIChyb290T3B0cy5vcHRpb25zLm92ZXJyaWRlcyB8fCBbXSkuZm9yRWFjaCgoXywgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVPcHMgPSBvdmVycmlkZXMoaW5wdXQsIGluZGV4KTtcblxuICAgICAgICBpZiAoY29uZmlnSXNBcHBsaWNhYmxlKG92ZXJyaWRlT3BzLCBkaXJuYW1lLCBjb250ZXh0KSkge1xuICAgICAgICAgIGZsYXR0ZW5lZENvbmZpZ3MucHVzaChvdmVycmlkZU9wcyk7XG4gICAgICAgICAgY29uc3Qgb3ZlcnJpZGVFbnZPcHRzID0gb3ZlcnJpZGVzRW52KGlucHV0LCBpbmRleCwgY29udGV4dC5lbnZOYW1lKTtcblxuICAgICAgICAgIGlmIChvdmVycmlkZUVudk9wdHMgJiYgY29uZmlnSXNBcHBsaWNhYmxlKG92ZXJyaWRlRW52T3B0cywgZGlybmFtZSwgY29udGV4dCkpIHtcbiAgICAgICAgICAgIGZsYXR0ZW5lZENvbmZpZ3MucHVzaChvdmVycmlkZUVudk9wdHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGZsYXR0ZW5lZENvbmZpZ3Muc29tZSgoe1xuICAgICAgb3B0aW9uczoge1xuICAgICAgICBpZ25vcmUsXG4gICAgICAgIG9ubHlcbiAgICAgIH1cbiAgICB9KSA9PiBzaG91bGRJZ25vcmUoY29udGV4dCwgaWdub3JlLCBvbmx5LCBkaXJuYW1lKSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYWluID0gZW1wdHlDaGFpbigpO1xuXG4gICAgZm9yIChjb25zdCBvcCBvZiBmbGF0dGVuZWRDb25maWdzKSB7XG4gICAgICBpZiAoIW1lcmdlRXh0ZW5kc0NoYWluKGNoYWluLCBvcC5vcHRpb25zLCBkaXJuYW1lLCBjb250ZXh0LCBmaWxlcykpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIG1lcmdlQ2hhaW5PcHRzKGNoYWluLCBvcCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYWluO1xuICB9O1xufVxuXG5mdW5jdGlvbiBtZXJnZUV4dGVuZHNDaGFpbihjaGFpbiwgb3B0cywgZGlybmFtZSwgY29udGV4dCwgZmlsZXMpIHtcbiAgaWYgKG9wdHMuZXh0ZW5kcyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdHJ1ZTtcbiAgY29uc3QgZmlsZSA9ICgwLCBfZmlsZXMubG9hZENvbmZpZykob3B0cy5leHRlbmRzLCBkaXJuYW1lLCBjb250ZXh0LmVudk5hbWUsIGNvbnRleHQuY2FsbGVyKTtcblxuICBpZiAoZmlsZXMuaGFzKGZpbGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb25maWd1cmF0aW9uIGN5Y2xlIGRldGVjdGVkIGxvYWRpbmcgJHtmaWxlLmZpbGVwYXRofS5cXG5gICsgYEZpbGUgYWxyZWFkeSBsb2FkZWQgZm9sbG93aW5nIHRoZSBjb25maWcgY2hhaW46XFxuYCArIEFycmF5LmZyb20oZmlsZXMsIGZpbGUgPT4gYCAtICR7ZmlsZS5maWxlcGF0aH1gKS5qb2luKFwiXFxuXCIpKTtcbiAgfVxuXG4gIGZpbGVzLmFkZChmaWxlKTtcbiAgY29uc3QgZmlsZUNoYWluID0gbG9hZEZpbGVDaGFpbih2YWxpZGF0ZUV4dGVuZEZpbGUoZmlsZSksIGNvbnRleHQsIGZpbGVzKTtcbiAgZmlsZXMuZGVsZXRlKGZpbGUpO1xuICBpZiAoIWZpbGVDaGFpbikgcmV0dXJuIGZhbHNlO1xuICBtZXJnZUNoYWluKGNoYWluLCBmaWxlQ2hhaW4pO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VDaGFpbih0YXJnZXQsIHNvdXJjZSkge1xuICB0YXJnZXQub3B0aW9ucy5wdXNoKC4uLnNvdXJjZS5vcHRpb25zKTtcbiAgdGFyZ2V0LnBsdWdpbnMucHVzaCguLi5zb3VyY2UucGx1Z2lucyk7XG4gIHRhcmdldC5wcmVzZXRzLnB1c2goLi4uc291cmNlLnByZXNldHMpO1xuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBtZXJnZUNoYWluT3B0cyh0YXJnZXQsIHtcbiAgb3B0aW9ucyxcbiAgcGx1Z2lucyxcbiAgcHJlc2V0c1xufSkge1xuICB0YXJnZXQub3B0aW9ucy5wdXNoKG9wdGlvbnMpO1xuICB0YXJnZXQucGx1Z2lucy5wdXNoKC4uLnBsdWdpbnMoKSk7XG4gIHRhcmdldC5wcmVzZXRzLnB1c2goLi4ucHJlc2V0cygpKTtcbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuZnVuY3Rpb24gZW1wdHlDaGFpbigpIHtcbiAgcmV0dXJuIHtcbiAgICBvcHRpb25zOiBbXSxcbiAgICBwcmVzZXRzOiBbXSxcbiAgICBwbHVnaW5zOiBbXVxuICB9O1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVPcHRpb25zKG9wdHMpIHtcbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdHMpO1xuICBkZWxldGUgb3B0aW9ucy5leHRlbmRzO1xuICBkZWxldGUgb3B0aW9ucy5lbnY7XG4gIGRlbGV0ZSBvcHRpb25zLm92ZXJyaWRlcztcbiAgZGVsZXRlIG9wdGlvbnMucGx1Z2lucztcbiAgZGVsZXRlIG9wdGlvbnMucHJlc2V0cztcbiAgZGVsZXRlIG9wdGlvbnMucGFzc1BlclByZXNldDtcbiAgZGVsZXRlIG9wdGlvbnMuaWdub3JlO1xuICBkZWxldGUgb3B0aW9ucy5vbmx5O1xuICBkZWxldGUgb3B0aW9ucy50ZXN0O1xuICBkZWxldGUgb3B0aW9ucy5pbmNsdWRlO1xuICBkZWxldGUgb3B0aW9ucy5leGNsdWRlO1xuXG4gIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KFwic291cmNlTWFwXCIpKSB7XG4gICAgb3B0aW9ucy5zb3VyY2VNYXBzID0gb3B0aW9ucy5zb3VyY2VNYXA7XG4gICAgZGVsZXRlIG9wdGlvbnMuc291cmNlTWFwO1xuICB9XG5cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGRlZHVwRGVzY3JpcHRvcnMoaXRlbXMpIHtcbiAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuICBjb25zdCBkZXNjcmlwdG9ycyA9IFtdO1xuXG4gIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgIGlmICh0eXBlb2YgaXRlbS52YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjb25zdCBmbktleSA9IGl0ZW0udmFsdWU7XG4gICAgICBsZXQgbmFtZU1hcCA9IG1hcC5nZXQoZm5LZXkpO1xuXG4gICAgICBpZiAoIW5hbWVNYXApIHtcbiAgICAgICAgbmFtZU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgbWFwLnNldChmbktleSwgbmFtZU1hcCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBkZXNjID0gbmFtZU1hcC5nZXQoaXRlbS5uYW1lKTtcblxuICAgICAgaWYgKCFkZXNjKSB7XG4gICAgICAgIGRlc2MgPSB7XG4gICAgICAgICAgdmFsdWU6IGl0ZW1cbiAgICAgICAgfTtcbiAgICAgICAgZGVzY3JpcHRvcnMucHVzaChkZXNjKTtcbiAgICAgICAgaWYgKCFpdGVtLm93blBhc3MpIG5hbWVNYXAuc2V0KGl0ZW0ubmFtZSwgZGVzYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXNjLnZhbHVlID0gaXRlbTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGVzY3JpcHRvcnMucHVzaCh7XG4gICAgICAgIHZhbHVlOiBpdGVtXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGVzY3JpcHRvcnMucmVkdWNlKChhY2MsIGRlc2MpID0+IHtcbiAgICBhY2MucHVzaChkZXNjLnZhbHVlKTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCBbXSk7XG59XG5cbmZ1bmN0aW9uIGNvbmZpZ0lzQXBwbGljYWJsZSh7XG4gIG9wdGlvbnNcbn0sIGRpcm5hbWUsIGNvbnRleHQpIHtcbiAgcmV0dXJuIChvcHRpb25zLnRlc3QgPT09IHVuZGVmaW5lZCB8fCBjb25maWdGaWVsZElzQXBwbGljYWJsZShjb250ZXh0LCBvcHRpb25zLnRlc3QsIGRpcm5hbWUpKSAmJiAob3B0aW9ucy5pbmNsdWRlID09PSB1bmRlZmluZWQgfHwgY29uZmlnRmllbGRJc0FwcGxpY2FibGUoY29udGV4dCwgb3B0aW9ucy5pbmNsdWRlLCBkaXJuYW1lKSkgJiYgKG9wdGlvbnMuZXhjbHVkZSA9PT0gdW5kZWZpbmVkIHx8ICFjb25maWdGaWVsZElzQXBwbGljYWJsZShjb250ZXh0LCBvcHRpb25zLmV4Y2x1ZGUsIGRpcm5hbWUpKTtcbn1cblxuZnVuY3Rpb24gY29uZmlnRmllbGRJc0FwcGxpY2FibGUoY29udGV4dCwgdGVzdCwgZGlybmFtZSkge1xuICBjb25zdCBwYXR0ZXJucyA9IEFycmF5LmlzQXJyYXkodGVzdCkgPyB0ZXN0IDogW3Rlc3RdO1xuICByZXR1cm4gbWF0Y2hlc1BhdHRlcm5zKGNvbnRleHQsIHBhdHRlcm5zLCBkaXJuYW1lKTtcbn1cblxuZnVuY3Rpb24gc2hvdWxkSWdub3JlKGNvbnRleHQsIGlnbm9yZSwgb25seSwgZGlybmFtZSkge1xuICBpZiAoaWdub3JlICYmIG1hdGNoZXNQYXR0ZXJucyhjb250ZXh0LCBpZ25vcmUsIGRpcm5hbWUpKSB7XG4gICAgZGVidWcoXCJJZ25vcmVkICVvIGJlY2F1c2UgaXQgbWF0Y2hlZCBvbmUgb2YgJU8gZnJvbSAlb1wiLCBjb250ZXh0LmZpbGVuYW1lLCBpZ25vcmUsIGRpcm5hbWUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKG9ubHkgJiYgIW1hdGNoZXNQYXR0ZXJucyhjb250ZXh0LCBvbmx5LCBkaXJuYW1lKSkge1xuICAgIGRlYnVnKFwiSWdub3JlZCAlbyBiZWNhdXNlIGl0IGZhaWxlZCB0byBtYXRjaCBvbmUgb2YgJU8gZnJvbSAlb1wiLCBjb250ZXh0LmZpbGVuYW1lLCBvbmx5LCBkaXJuYW1lKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlc1BhdHRlcm5zKGNvbnRleHQsIHBhdHRlcm5zLCBkaXJuYW1lKSB7XG4gIHJldHVybiBwYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gbWF0Y2hQYXR0ZXJuKHBhdHRlcm4sIGRpcm5hbWUsIGNvbnRleHQuZmlsZW5hbWUsIGNvbnRleHQpKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hQYXR0ZXJuKHBhdHRlcm4sIGRpcm5hbWUsIHBhdGhUb1Rlc3QsIGNvbnRleHQpIHtcbiAgaWYgKHR5cGVvZiBwYXR0ZXJuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gISFwYXR0ZXJuKHBhdGhUb1Rlc3QsIHtcbiAgICAgIGRpcm5hbWUsXG4gICAgICBlbnZOYW1lOiBjb250ZXh0LmVudk5hbWUsXG4gICAgICBjYWxsZXI6IGNvbnRleHQuY2FsbGVyXG4gICAgfSk7XG4gIH1cblxuICBpZiAodHlwZW9mIHBhdGhUb1Rlc3QgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENvbmZpZ3VyYXRpb24gY29udGFpbnMgc3RyaW5nL1JlZ0V4cCBwYXR0ZXJuLCBidXQgbm8gZmlsZW5hbWUgd2FzIHBhc3NlZCB0byBCYWJlbGApO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwYXR0ZXJuID09PSBcInN0cmluZ1wiKSB7XG4gICAgcGF0dGVybiA9ICgwLCBfcGF0dGVyblRvUmVnZXguZGVmYXVsdCkocGF0dGVybiwgZGlybmFtZSk7XG4gIH1cblxuICByZXR1cm4gcGF0dGVybi50ZXN0KHBhdGhUb1Rlc3QpO1xufSJdfQ==