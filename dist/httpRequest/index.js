"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _https = _interopRequireDefault(require("https"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const httpRequest = async (url, headers, data, method) => new Promise((resolve, reject) => {
  const options = {
    hostname: url.hostname,
    port: 443,
    path: url.pathname + url.search
  };
  options.method = method;
  options.headers = headers;

  const req = _https.default.request(options, res => {
    let answer = '';
    res.on('data', dataRes => {
      answer += dataRes;
    });
    res.on('end', () => {
      const {
        ok
      } = JSON.parse(answer);
      ok ? resolve(answer) : reject(answer);
    });
    res.on('error', () => {
      console.log('reject', answer);
      reject(answer);
    });
  });

  if (options.headers !== undefined) {
    if ('Content-Type' in options.headers) {
      if (options.headers['Content-Type'] === 'application/json') {
        req.write(JSON.stringify(data));
      }
    }
  }

  req.end();
});

var _default = httpRequest;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9odHRwUmVxdWVzdC9pbmRleC5qcyJdLCJuYW1lcyI6WyJodHRwUmVxdWVzdCIsInVybCIsImhlYWRlcnMiLCJkYXRhIiwibWV0aG9kIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvcHRpb25zIiwiaG9zdG5hbWUiLCJwb3J0IiwicGF0aCIsInBhdGhuYW1lIiwic2VhcmNoIiwicmVxIiwiaHR0cHMiLCJyZXF1ZXN0IiwicmVzIiwiYW5zd2VyIiwib24iLCJkYXRhUmVzIiwib2siLCJKU09OIiwicGFyc2UiLCJjb25zb2xlIiwibG9nIiwidW5kZWZpbmVkIiwid3JpdGUiLCJzdHJpbmdpZnkiLCJlbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLE1BQU1BLFdBQVcsR0FBRyxPQUFPQyxHQUFQLEVBQVlDLE9BQVosRUFBcUJDLElBQXJCLEVBQTJCQyxNQUEzQixLQUFzQyxJQUFJQyxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQ3pGLFFBQU1DLE9BQU8sR0FBRztBQUNkQyxJQUFBQSxRQUFRLEVBQUVSLEdBQUcsQ0FBQ1EsUUFEQTtBQUVkQyxJQUFBQSxJQUFJLEVBQUUsR0FGUTtBQUdkQyxJQUFBQSxJQUFJLEVBQUVWLEdBQUcsQ0FBQ1csUUFBSixHQUFlWCxHQUFHLENBQUNZO0FBSFgsR0FBaEI7QUFLQUwsRUFBQUEsT0FBTyxDQUFDSixNQUFSLEdBQWlCQSxNQUFqQjtBQUNBSSxFQUFBQSxPQUFPLENBQUNOLE9BQVIsR0FBa0JBLE9BQWxCOztBQUVBLFFBQU1ZLEdBQUcsR0FBR0MsZUFBTUMsT0FBTixDQUFjUixPQUFkLEVBQXdCUyxHQUFELElBQVM7QUFDMUMsUUFBSUMsTUFBTSxHQUFHLEVBQWI7QUFDQUQsSUFBQUEsR0FBRyxDQUFDRSxFQUFKLENBQU8sTUFBUCxFQUFnQkMsT0FBRCxJQUFhO0FBQzFCRixNQUFBQSxNQUFNLElBQUlFLE9BQVY7QUFDRCxLQUZEO0FBR0FILElBQUFBLEdBQUcsQ0FBQ0UsRUFBSixDQUFPLEtBQVAsRUFBYyxNQUFNO0FBQ2xCLFlBQU07QUFBRUUsUUFBQUE7QUFBRixVQUFTQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0wsTUFBWCxDQUFmO0FBQ0FHLE1BQUFBLEVBQUUsR0FBR2YsT0FBTyxDQUFFWSxNQUFGLENBQVYsR0FBc0JYLE1BQU0sQ0FBRVcsTUFBRixDQUE5QjtBQUNELEtBSEQ7QUFJQUQsSUFBQUEsR0FBRyxDQUFDRSxFQUFKLENBQU8sT0FBUCxFQUFnQixNQUFNO0FBQ3BCSyxNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxRQUFaLEVBQXNCUCxNQUF0QjtBQUNBWCxNQUFBQSxNQUFNLENBQUNXLE1BQUQsQ0FBTjtBQUNELEtBSEQ7QUFJRCxHQWJXLENBQVo7O0FBY0EsTUFBSVYsT0FBTyxDQUFDTixPQUFSLEtBQW9Cd0IsU0FBeEIsRUFBbUM7QUFDakMsUUFBSSxrQkFBa0JsQixPQUFPLENBQUNOLE9BQTlCLEVBQXVDO0FBQ3JDLFVBQUlNLE9BQU8sQ0FBQ04sT0FBUixDQUFnQixjQUFoQixNQUFvQyxrQkFBeEMsRUFBNEQ7QUFDMURZLFFBQUFBLEdBQUcsQ0FBQ2EsS0FBSixDQUFVTCxJQUFJLENBQUNNLFNBQUwsQ0FBZXpCLElBQWYsQ0FBVjtBQUNEO0FBQ0Y7QUFDRjs7QUFDRFcsRUFBQUEsR0FBRyxDQUFDZSxHQUFKO0FBQ0QsQ0EvQnlELENBQTFEOztlQWlDZTdCLFciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaHR0cHMgZnJvbSAnaHR0cHMnO1xuXG5jb25zdCBodHRwUmVxdWVzdCA9IGFzeW5jICh1cmwsIGhlYWRlcnMsIGRhdGEsIG1ldGhvZCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIGhvc3RuYW1lOiB1cmwuaG9zdG5hbWUsXG4gICAgcG9ydDogNDQzLFxuICAgIHBhdGg6IHVybC5wYXRobmFtZSArIHVybC5zZWFyY2gsXG4gIH07XG4gIG9wdGlvbnMubWV0aG9kID0gbWV0aG9kO1xuICBvcHRpb25zLmhlYWRlcnMgPSBoZWFkZXJzO1xuXG4gIGNvbnN0IHJlcSA9IGh0dHBzLnJlcXVlc3Qob3B0aW9ucywgKHJlcykgPT4ge1xuICAgIGxldCBhbnN3ZXIgPSAnJztcbiAgICByZXMub24oJ2RhdGEnLCAoZGF0YVJlcykgPT4ge1xuICAgICAgYW5zd2VyICs9IGRhdGFSZXM7XG4gICAgfSk7XG4gICAgcmVzLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IG9rIH0gPSBKU09OLnBhcnNlKGFuc3dlcik7XG4gICAgICBvayA/IHJlc29sdmUgKGFuc3dlcikgOiByZWplY3QgKGFuc3dlcik7XG4gICAgfSk7XG4gICAgcmVzLm9uKCdlcnJvcicsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdyZWplY3QnLCBhbnN3ZXIpO1xuICAgICAgcmVqZWN0KGFuc3dlcik7XG4gICAgfSk7XG4gIH0pO1xuICBpZiAob3B0aW9ucy5oZWFkZXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoJ0NvbnRlbnQtVHlwZScgaW4gb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICBpZiAob3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9PT0gJ2FwcGxpY2F0aW9uL2pzb24nKSB7XG4gICAgICAgIHJlcS53cml0ZShKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJlcS5lbmQoKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBodHRwUmVxdWVzdDtcbiJdfQ==